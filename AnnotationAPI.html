
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Source-code Annotations &#8212; Caliper 2.0.0-dev documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Runtime Configuration" href="configuration.html" />
    <link rel="prev" title="Architecture and Workflow" href="workflow.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="configuration.html" title="Runtime Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="workflow.html" title="Architecture and Workflow"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.0.0-dev documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="source-code-annotations">
<h1>Source-code Annotations<a class="headerlink" href="#source-code-annotations" title="Permalink to this headline">¶</a></h1>
<p>Caliper provides source-code annotation APIs to mark and name code
regions or features of interest. The high-level annotation API
provides easy access to pre-defined annotation types. The low-level
annotation API lets users create their own context attributes to
capture custom code features.</p>
<div class="section" id="high-level-annotations">
<h2>High-level Annotations<a class="headerlink" href="#high-level-annotations" title="Permalink to this headline">¶</a></h2>
<p>Caliper provides pre-defined annotation types for functions, loops,
and user-defined code regions, and a set of C and C++ macros to mark
and name those entities.</p>
<div class="section" id="function-annotations">
<h3>Function Annotations<a class="headerlink" href="#function-annotations" title="Permalink to this headline">¶</a></h3>
<p>Function annotations export the name of the annotated function, which
is taken from the <code class="docutils literal"><span class="pre">__FUNC__</span></code> compiler macro. The annotations should
be placed within a function of interest, ideally near the top. In C,
the function begin and <em>all</em> exit points must be marked. In C++, only
the begin has to be marked. Caliper exports the hierarchy of annotated
functions in the <cite>function</cite> attribute.</p>
<p>C++ example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="kt">int</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">CALI_CXX_MARK_FUNCTION</span><span class="p">;</span> <span class="c1">// Exports &quot;function=foo&quot;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
  <span class="c1">// In C++, the function annotation is closed automatically</span>
<span class="p">}</span>
</pre></div>
</div>
<p>C example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="kt">int</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">CALI_MARK_FUNCTION</span><span class="p">;</span>       <span class="cm">/* Exports &quot;function=foo&quot;          */</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">CALI_MARK_FUNCTION_END</span><span class="p">;</span> <span class="cm">/* ALL exit points must be marked! */</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">CALI_MARK_FUNCTION_END</span><span class="p">;</span>   <span class="cm">/* ALL exit points must be marked! */</span>
  <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-annotations">
<h3>Loop Annotations<a class="headerlink" href="#loop-annotations" title="Permalink to this headline">¶</a></h3>
<p>Loop annotations mark and name loops. The annotations should be placed
immediately outside a loop of interest. Both begin and end of the loop
have to be marked. Optionally, the loop iterations themselves can be
marked and the iteration number exported by placing loop iteration
annotations inside the loop body.  Caliper exports the loop name in
the <cite>loop</cite> attribute. Loop iterations are exported in per-loop
attributes named <cite>iteration#name</cite>, where <cite>name</cite> is the user-provided
loop name given to the loop annotation.</p>
<p>C++ example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="n">CALI_CXX_MARK_LOOP_BEGIN</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">,</span> <span class="s">&quot;myloop&quot;</span><span class="p">);</span> <span class="c1">// exports loop=myloop</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ITER</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">CALI_CXX_MARK_LOOP_ITERATION</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>  <span class="c1">// exports iteration#myloop=&lt;i&gt;</span>

  <span class="c1">// In C++, the iteration annotation is closed automatically</span>
<span class="p">}</span>
<span class="n">CALI_CXX_MARK_LOOP_END</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">);</span>
</pre></div>
</div>
<p>C example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="n">CALI_MARK_LOOP_BEGIN</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">,</span> <span class="s">&quot;myloop&quot;</span><span class="p">);</span> <span class="c1">// exports loop=myloop</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ITER</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">CALI_MARK_ITERATION_BEGIN</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span> <span class="c1">// exports iteration#myloop=&lt;i&gt;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">test</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">CALI_MARK_ITERATION_END</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">);</span>    <span class="c1">// must mark ALL iteration exit points</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">CALI_MARK_ITERATION_END</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">);</span>      <span class="c1">// must mark ALL iteration exit points</span>
<span class="p">}</span>
<span class="n">CALI_MARK_LOOP_END</span><span class="p">(</span><span class="n">myloop_id</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="code-region-annotations">
<h3>Code-region Annotations<a class="headerlink" href="#code-region-annotations" title="Permalink to this headline">¶</a></h3>
<p>Code-region annotations mark and name user-defined source code
regions. Caliper exports the region names in the <cite>annotation</cite>
attribute. Annotated code regions must be properly nested (see
<a class="reference internal" href="#nesting">Nesting</a>).</p>
<p>Example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="n">CALI_MARK_BEGIN</span><span class="p">(</span><span class="s">&quot;Important code&quot;</span><span class="p">);</span> <span class="c1">// exports annotation=&quot;Important code&quot;</span>
<span class="c1">// ... important code</span>
<span class="n">CALI_MARK_END</span><span class="p">(</span><span class="s">&quot;Important code&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="nesting">
<h3>Nesting<a class="headerlink" href="#nesting" title="Permalink to this headline">¶</a></h3>
<p>Annotated source-code regions of any of the pre-defined context
attributes (<cite>function</cite>, <cite>loop</cite>, and <cite>annotation</cite>) can be nested within
each other. Caliper preserves this nesting information. Users must
ensure that the nesting is correct. That is, annotated code regions
have to be enclosed completely within each other; they cannot
partially overlap. Example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="kt">int</span> <span class="nf">foo</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">CALI_CXX_MARK_FUNCTION</span><span class="p">;</span>

  <span class="n">CALI_MARK_BEGIN</span><span class="p">(</span><span class="s">&quot;outer&quot;</span><span class="p">);</span>
  <span class="n">CALI_MARK_BEGIN</span><span class="p">(</span><span class="s">&quot;inner&quot;</span><span class="p">);</span> <span class="c1">// The hierarchy is now &quot;foo/outer/inner&quot;</span>

<span class="cp">#if 0</span><span class="c"></span>
<span class="c">  CALI_MARK_END(&quot;outer&quot;);   // Error! Must end &quot;inner&quot; before &quot;outer&quot;!</span>
<span class="c">  CALI_MARK_END(&quot;inner&quot;);</span>
<span class="cp">#endif</span>

  <span class="n">CALI_MARK_END</span><span class="p">(</span><span class="s">&quot;inner&quot;</span><span class="p">);</span>
  <span class="n">CALI_MARK_END</span><span class="p">(</span><span class="s">&quot;outer&quot;</span><span class="p">);</span>   <span class="c1">// Correct nesting</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To annotate arbitrary features or regions that can overlap with
others, use the low-level annotation API and create a user-defined
context attribute.</p>
</div>
</div>
<div class="section" id="low-level-annotation-api">
<h2>Low-level Annotation API<a class="headerlink" href="#low-level-annotation-api" title="Permalink to this headline">¶</a></h2>
<p>The “low-level” annotation API lets users create and export additional
context attributes with user-defined names to capture custom code
features or annotate arbitrary, non-nested code regions.</p>
<div class="section" id="attribute-keys">
<h3>Attribute keys<a class="headerlink" href="#attribute-keys" title="Permalink to this headline">¶</a></h3>
<p>Context attributes are the basic element in Caliper’s key:value data
model. The high-level annotation API uses pre-defined attribute keys,
but users can create their own. Attribute keys have a unique name, and
store the attribute’s data type as well as optional property flags.
Property flags control how the Caliper runtime system handles the
associated attributes.</p>
<dl class="type">
<dt id="_CPPv220cali_attr_properties">
<span id="cali_attr_properties"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5ca"></span><em class="property">enum </em><code class="descclassname"></code><code class="descname">cali_attr_properties</code><a class="headerlink" href="#_CPPv220cali_attr_properties" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Attribute property flags. </p>
<p>These flags control how the caliper runtime system handles the associated attributes. Flags can be combined with a bitwise OR (however, the scope flags are mutually exclusive). </p>
<p><em>Values:</em></p>
<dl class="member">
<dt id="_CPPv217CALI_ATTR_DEFAULT">
<span id="CALI_ATTR_DEFAULT"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa4b116315bb43d15d204b6fc4306a967d"></span><code class="descname">CALI_ATTR_DEFAULT</code> =     0<a class="headerlink" href="#_CPPv217CALI_ATTR_DEFAULT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Default value. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv217CALI_ATTR_ASVALUE">
<span id="CALI_ATTR_ASVALUE"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa5f2d48cb4030e23aae7c72d95fe45bf2"></span><code class="descname">CALI_ATTR_ASVALUE</code> =     1<a class="headerlink" href="#_CPPv217CALI_ATTR_ASVALUE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Store directly as key:value pair, not in the context tree. </p>
<p>Attributes with this property will be not be put into the context tree, but stored directly as key:value pairs on the blackboard and in snapshot records. ASVALUE attributes cannot be nested. Only applicable to scalar data types. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv217CALI_ATTR_NOMERGE">
<span id="CALI_ATTR_NOMERGE"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa6750ad25cdd1deb8f9e41fdfcba3bc1d"></span><code class="descname">CALI_ATTR_NOMERGE</code> =     2<a class="headerlink" href="#_CPPv217CALI_ATTR_NOMERGE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a separate context tree root node for this attribute. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv223CALI_ATTR_SCOPE_PROCESS">
<span id="CALI_ATTR_SCOPE_PROCESS"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa4b80a68db7b4542f0858d840b8048be8"></span><code class="descname">CALI_ATTR_SCOPE_PROCESS</code> =    12<a class="headerlink" href="#_CPPv223CALI_ATTR_SCOPE_PROCESS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Process-scope attribute. Shared between all threads. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv222CALI_ATTR_SCOPE_THREAD">
<span id="CALI_ATTR_SCOPE_THREAD"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa2659fdafdab0c2c1140dbc06cceb0213"></span><code class="descname">CALI_ATTR_SCOPE_THREAD</code> =    20<a class="headerlink" href="#_CPPv222CALI_ATTR_SCOPE_THREAD" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Thread-scope attribute. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv220CALI_ATTR_SCOPE_TASK">
<span id="CALI_ATTR_SCOPE_TASK"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caad01163dc50d3fbddbf42eaeff8983502"></span><code class="descname">CALI_ATTR_SCOPE_TASK</code> =    24<a class="headerlink" href="#_CPPv220CALI_ATTR_SCOPE_TASK" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Task-scope attribute. Currently unused. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv221CALI_ATTR_SKIP_EVENTS">
<span id="CALI_ATTR_SKIP_EVENTS"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa40a540e1668851df683a334d11570f30"></span><code class="descname">CALI_ATTR_SKIP_EVENTS</code> =    64<a class="headerlink" href="#_CPPv221CALI_ATTR_SKIP_EVENTS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Skip event callbacks for blackboard updates with this attribute. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv216CALI_ATTR_HIDDEN">
<span id="CALI_ATTR_HIDDEN"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caa974d8faafa9eb497b38d805853f7f268"></span><code class="descname">CALI_ATTR_HIDDEN</code> =   128<a class="headerlink" href="#_CPPv216CALI_ATTR_HIDDEN" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Do not include this attribute in snapshots. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv216CALI_ATTR_NESTED">
<span id="CALI_ATTR_NESTED"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caaea5e00782e7b5f9768ecb1e287b9ab89"></span><code class="descname">CALI_ATTR_NESTED</code> =   256<a class="headerlink" href="#_CPPv216CALI_ATTR_NESTED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Begin/end calls are properly aligned with the call stack. </p>
<p>Indicates that <em>begin/end</em> calls for this attribute are correctly nested with the call stack and other NESTED attributes. That is, an active region of a NESTED attribute does not partially overlap function calls or other NESTED attribute regions. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv216CALI_ATTR_GLOBAL">
<span id="CALI_ATTR_GLOBAL"></span><span class="target" id="calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5caaa02430c4cc50e9f0f64f1e19a62c4344"></span><code class="descname">CALI_ATTR_GLOBAL</code> =   512<a class="headerlink" href="#_CPPv216CALI_ATTR_GLOBAL" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A metadata attribute describing global information for a measurement run. </p>
<p>Global attributes represent metadata associated with an application run (e.g., application executable name and version, start date and time, and so on). They may be written in a separate metadata section in some output formats. For distributed programs (e.g. MPI), global attributes should have the same value on each process. </p>
</dd></dl>

</dd></dl>

<p>Attribute keys can be created with <code class="xref c c-func docutils literal"><span class="pre">cali_create_attribute()</span></code>:</p>
<dl class="function">
<dt id="_CPPv221cali_create_attributePKc14cali_attr_typei">
<span id="cali_create_attribute__cCP.cali_attr_type.i"></span><span class="target" id="calipercali_8h_1a8b7546c4ceff7ed8047a406de6de1c5e"></span>cali_id_t <code class="descclassname"></code><code class="descname">cali_create_attribute</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em>, cali_attr_type <em>type</em>, int <em>properties</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv221cali_create_attributePKc14cali_attr_typei" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create an attribute. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Attribute id </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: Name of the attribute </li>
<li><code class="docutils literal"><span class="pre">type</span></code>: Type of the attribute </li>
<li><code class="docutils literal"><span class="pre">properties</span></code>: Attribute properties </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="c-annotation-api">
<h3>C annotation API<a class="headerlink" href="#c-annotation-api" title="Permalink to this headline">¶</a></h3>
<p>The C and Fortran annotation API provides the
<code class="docutils literal"><span class="pre">cali_begin_*[byname]</span></code>, <code class="docutils literal"><span class="pre">cali_end[_byname]</span></code>, and
<code class="docutils literal"><span class="pre">cali_set_*_[byname]</span></code> family of functions. Their behavior is as
follows:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">begin</span></code></dt>
<dd>Marks the begin of a region with the given attribute/value. The new
value will be nested under already open regions of the same
attribute.</dd>
<dt><code class="docutils literal"><span class="pre">set</span></code></dt>
<dd>Sets or overwrites the top-most value for the given attribute.</dd>
<dt><code class="docutils literal"><span class="pre">end</span></code></dt>
<dd>Closes the top-most open region for the given attribute.</dd>
</dl>
<p>The <code class="docutils literal"><span class="pre">byname</span></code> variants refer to attribute keys by their name. If no
attribute key with the given name exists, it will be created with
default properties. The basic variants take an attribute ID, e.g.
from <code class="xref c c-func docutils literal"><span class="pre">cali_create_attribute()</span></code>.</p>
<p>Example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;caliper/cali.h&gt;</span>

<span class="cm">/* Exports CustomAttribute=&quot;My great example&quot; */</span>
<span class="n">cali_begin_string_byname</span><span class="p">(</span><span class="s">&quot;CustomAttribute&quot;</span><span class="p">,</span> <span class="s">&quot;My great example&quot;</span><span class="p">)</span>

<span class="cm">/* Creates attribute key &quot;myvar&quot; with ASVALUE storage property */</span>
<span class="kt">cali_id_t</span> <span class="n">myvar_attr</span> <span class="o">=</span>
  <span class="n">cali_create_attribute</span><span class="p">(</span><span class="s">&quot;myvar&quot;</span><span class="p">,</span> <span class="n">CALI_TYPE_INT</span><span class="p">,</span> <span class="n">CALI_ATTR_ASVALUE</span><span class="p">);</span>

<span class="cm">/* Exports myvar=42 */</span>
<span class="n">cali_set_int</span><span class="p">(</span><span class="n">myvar_attr</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>

<span class="cm">/* Closes CustomAttribute=&quot;My great example&quot; */</span>
<span class="n">cali_end_byname</span><span class="p">(</span><span class="s">&quot;CustomAttribute&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="fortran-annotation-api">
<h3>Fortran annotation API<a class="headerlink" href="#fortran-annotation-api" title="Permalink to this headline">¶</a></h3>
<p>The Fortran API is a thin wrapper around the C API. Fortran subroutine
names and semantics are identical to the respective C versions.</p>
<p>Fortran API signatures:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">subroutine</span> <span class="n">cali_create_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span>        <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span>  <span class="p">::</span> <span class="n">name</span>
  <span class="n">integer</span><span class="p">,</span>                 <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span>  <span class="p">::</span> <span class="nb">type</span>
  <span class="n">integer</span><span class="p">,</span>                 <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span>  <span class="p">::</span> <span class="n">properties</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>

<span class="n">subroutine</span> <span class="n">cali_begin_string</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span>            <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_begin_int</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">integer</span><span class="p">,</span>                     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_begin_double</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">real</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span>                      <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_set_string</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span>            <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_set_int</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">integer</span><span class="p">,</span>                     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_set_double</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">real</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span>                      <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_end</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">C_INT64_T</span><span class="p">),</span>     <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="nb">id</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_begin_string_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_begin_int_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">integer</span><span class="p">,</span>          <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_begin_double_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">real</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span>           <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_set_string_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_set_int_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">integer</span><span class="p">,</span>          <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_set_double_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">real</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span>           <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">val</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>

<span class="n">subroutine</span> <span class="n">cali_end_byname</span>
  <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">attr_name</span>
  <span class="n">integer</span><span class="p">(</span><span class="n">kind</span><span class="p">(</span><span class="n">CALI_SUCCESS</span><span class="p">)),</span> <span class="n">intent</span><span class="p">(</span><span class="n">out</span><span class="p">),</span> <span class="n">optional</span> <span class="p">::</span> <span class="n">err</span>
</pre></div>
</div>
<div class="section" id="fortran-api-example">
<h4>Fortran API example<a class="headerlink" href="#fortran-api-example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre>program testf03
  use Caliper

  implicit none

  integer                    :: cali_ret
  integer(kind(CALI_INV_ID)) :: iter_attr
  integer                    :: i, count

  ! Mark &quot;initialization&quot; phase
  call cali_begin_byname(&#39;initialization&#39;)
  count = 4
  call cali_end_byname(&#39;initialization&#39;)

  if (count .gt. 0) then
     ! Mark &quot;loop&quot; phase
     call cali_begin_byname(&#39;loop&#39;)

     ! create attribute for iteration counter with CALI_ATTR_ASVALUE property
     call cali_create_attribute(&#39;iteration&#39;, CALI_TYPE_INT, &amp;
          CALI_ATTR_ASVALUE, iter_attr)

     do i = 1,count
        ! Update iteration counter attribute
        call cali_set_int(iter_attr, i)

        ! A Caliper snapshot taken at this point will contain
        ! { &quot;loop&quot;, &quot;iteration&quot;=&lt;i&gt; }

        ! perform calculation
     end do

     ! Clear the iteration counter attribute (otherwise, snapshots taken
     ! after the loop will still contain the last iteration value)
     call cali_end(iter_attr, cali_ret)

     ! Checking return value (not required, but good style)
     if (cali_ret .ne. CALI_SUCCESS) then
        print *, &quot;cali_end returned with&quot;, cali_ret
     end if

     ! End &quot;loop&quot; phase
     call cali_end_byname(&#39;loop&#39;)
  end if
end program testf03
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h3>C++ annotation API<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The C++ annotation API is implemented in the class <a class="reference internal" href="#_CPPv2N4cali10AnnotationE" title="cali::Annotation"><code class="xref cpp cpp-class docutils literal"><span class="pre">cali::Annotation</span></code></a>.</p>
<dl class="class">
<dt id="_CPPv2N4cali10AnnotationE">
<span id="cali::Annotation"></span><span class="target" id="caliperclasscali_1_1Annotation"></span><em class="property">class </em><code class="descclassname">cali::</code><code class="descname">Annotation</code><a class="headerlink" href="#_CPPv2N4cali10AnnotationE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Instrumentation interface to add and manipulate context attributes. </p>
<p>The Annotation class is the primary source-code instrumentation interface for Caliper. Annotation objects provide access to named Caliper context attributes. If the referenced attribute does not exist yet, it will be created automatically.</p>
<p>Example: <div class="highlight-default"><div class="highlight"><pre><span class="n">cali</span><span class="p">::</span><span class="n">Annotation</span> <span class="n">phase_ann</span><span class="p">(</span><span class="s">&quot;myprogram.phase&quot;</span><span class="p">);</span>

<span class="n">phase_ann</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="s">&quot;Initialization&quot;</span><span class="p">);</span>
  <span class="o">//</span> <span class="o">...</span>
<span class="n">phase_ann</span><span class="o">.</span><span class="n">end</span><span class="p">();</span>
</pre></div>
</div>
 This example creates an annotation object for the <code class="docutils literal"><span class="pre">myprogram.phase</span></code> attribute, and uses the <code class="docutils literal"><span class="pre">begin()/end</span></code>() methods to mark a section of code where that attribute is set to “Initialization”.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>Access to the underlying named context attribute through Annotation objects is not exclusive: multiple Annotation objects can reference and update the same context attribute. </dd>
</dl>
</p>
</dd></dl>

</div>
</div>
<div class="section" id="data-tracking-api">
<h2>Data tracking API<a class="headerlink" href="#data-tracking-api" title="Permalink to this headline">¶</a></h2>
<p>Caliper also supports tracking allocated data. Doing so provides
advanced data-centric attributes, such as recording allocation events
and determining the containers for memory addresses provided by
services like libpfm. To take advantage of annotated memory
allocations, the <a class="reference internal" href="services.html#alloc-service"><span class="std std-ref">alloc</span></a> service must be enabled
at runtime.</p>
<p>Memory allocation annotations are similar to code region annotations,
we can define labels for allocations using macros, which will use the
variable name of the given pointer as label for the memory
allocations.  We can either label 1-dimensional ranges of bytes using
<cite>CALI_DATATRACKER_TRACK</cite> or multi-dimensional ranges of specified
element sizes using <cite>CALI_DATATRACKER_TRACK_DIMENSIONAL</cite>.  The
following example shows both:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">void</span> <span class="n">do_work</span><span class="p">(</span><span class="n">size_t</span> <span class="n">M</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">W</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">N</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">double</span> <span class="o">*</span><span class="n">arrayA</span> <span class="o">=</span> <span class="p">(</span><span class="n">double</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">N</span><span class="p">);</span>
    <span class="n">CALI_DATATRACKER_TRACK</span><span class="p">(</span><span class="n">arrayA</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>

    <span class="n">double</span> <span class="o">*</span><span class="n">matA</span> <span class="o">=</span>
         <span class="p">(</span><span class="n">double</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">sizeof</span><span class="p">(</span><span class="n">double</span><span class="p">)</span><span class="o">*</span><span class="n">M</span><span class="o">*</span><span class="n">W</span><span class="p">);</span>

    <span class="n">size_t</span> <span class="n">num_dimensions</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">A_dims</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="n">M</span><span class="p">,</span><span class="n">W</span><span class="p">};</span>
    <span class="n">CALI_DATATRACKER_TRACK_DIMENSIONAL</span><span class="p">(</span>
                <span class="n">matA</span><span class="p">,</span>
                <span class="n">sizeof</span><span class="p">(</span><span class="n">double</span><span class="p">),</span>
                <span class="n">A_dims</span><span class="p">,</span>
                <span class="n">num_dimensions</span><span class="p">);</span>
        <span class="o">...</span>

    <span class="n">CALI_DATATRACKER_FREE</span><span class="p">(</span><span class="n">arrayA</span><span class="p">);</span>
    <span class="n">CALI_DATATRACKER_FREE</span><span class="p">(</span><span class="n">matA</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="group">
<dt>
<span class="target" id="calipergroup__AnnotationAPI"></span><em>group</em> <code class="descname">AnnotationAPI</code></dt>
<dd><p>The user-facing source-code annotation API. </p>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Low-level source-code annotation API</p>
<dl class="function">
<dt id="_CPPv210cali_begin9cali_id_t">
<span id="cali_begin__cali_id_t"></span><span class="target" id="calipergroup__AnnotationAPI_1ga523eb18cd9d4f03a4200e628946e2c04"></span>cali_err <code class="descname">cali_begin</code><span class="sig-paren">(</span>cali_id_t <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv210cali_begin9cali_id_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Put attribute attr on the blackboard. Parameters: </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">attr</span></code>: An attribute of type CALI_TYPE_BOOL </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv217cali_begin_double9cali_id_td">
<span id="cali_begin_double__cali_id_t.double"></span><span class="target" id="calipergroup__AnnotationAPI_1gab7483c11ecd73d297c7221016015532b"></span>cali_err <code class="descname">cali_begin_double</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, double <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv217cali_begin_double9cali_id_td" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add <em>val</em> for attribute <em>attr</em> to the blackboard. The new value is nested under the current value of <em>attr</em>. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv214cali_begin_int9cali_id_ti">
<span id="cali_begin_int__cali_id_t.i"></span><span class="target" id="calipergroup__AnnotationAPI_1ga93357e8970db8d82fac359be5e2b70ec"></span>cali_err <code class="descname">cali_begin_int</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, int <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv214cali_begin_int9cali_id_ti" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv217cali_begin_string9cali_id_tPKc">
<span id="cali_begin_string__cali_id_t.cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1gac7da070c45f79eeb04f4c68fde351f30"></span>cali_err <code class="descname">cali_begin_string</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, <em class="property">const</em> char *<em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv217cali_begin_string9cali_id_tPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv28cali_end9cali_id_t">
<span id="cali_end__cali_id_t"></span><span class="target" id="calipergroup__AnnotationAPI_1gada3168a2523b239babe32672e388ca01"></span>cali_err <code class="descname">cali_end</code><span class="sig-paren">(</span>cali_id_t <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv28cali_end9cali_id_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove innermost value for attribute <code class="docutils literal"><span class="pre">attr</span></code> from the blackboard. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv220cali_safe_end_string9cali_id_tPKc">
<span id="cali_safe_end_string__cali_id_t.cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga323c619ef68d0e15e5f76a47f10ff4ac"></span>cali_err <code class="descname">cali_safe_end_string</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, <em class="property">const</em> char *<em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv220cali_safe_end_string9cali_id_tPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove innermost value for attribute <em>attr</em> from the blackboard. </p>
<p>Creates a mismatch warning if the current value does not match <em>val</em>. This function is primarily used by the high-level annotation API.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">attr</span></code>: Attribute ID </li>
<li><code class="docutils literal"><span class="pre">val</span></code>: Expected value </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv28cali_set9cali_id_tPKv6size_t">
<span id="cali_set__cali_id_t.voidCP.s"></span><span class="target" id="calipergroup__AnnotationAPI_1ga1202bff4bd31c4e81809a0ff02cdd6ba"></span>cali_err <code class="descname">cali_set</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, <em class="property">const</em> void *<em>value</em>, size_t <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv28cali_set9cali_id_tPKv6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Change current innermost value on the blackboard for attribute <em>attr</em> to value taken from <em>value</em> with size <em>size</em>. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv215cali_set_double9cali_id_td">
<span id="cali_set_double__cali_id_t.double"></span><span class="target" id="calipergroup__AnnotationAPI_1ga128340c8626fbab4fe8bcd9d0eda83f9"></span>cali_err <code class="descname">cali_set_double</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, double <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv215cali_set_double9cali_id_td" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv212cali_set_int9cali_id_ti">
<span id="cali_set_int__cali_id_t.i"></span><span class="target" id="calipergroup__AnnotationAPI_1gab6518c2f0c51bfa6828a1a5c33bd9d80"></span>cali_err <code class="descname">cali_set_int</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, int <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv212cali_set_int9cali_id_ti" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv215cali_set_string9cali_id_tPKc">
<span id="cali_set_string__cali_id_t.cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga006b7b6bce9df2eba218b227593d8add"></span>cali_err <code class="descname">cali_set_string</code><span class="sig-paren">(</span>cali_id_t <em>attr</em>, <em class="property">const</em> char *<em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv215cali_set_string9cali_id_tPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv217cali_begin_bynamePKc">
<span id="cali_begin_byname__cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga0c6ef304d87e384b56b58a9281416793"></span>cali_err <code class="descname">cali_begin_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv217cali_begin_bynamePKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Put attribute with name <em>attr_name</em> on the blackboard. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv224cali_begin_double_bynamePKcd">
<span id="cali_begin_double_byname__cCP.double"></span><span class="target" id="calipergroup__AnnotationAPI_1ga78bd2469f651a9a1d70b2a7b30999dd6"></span>cali_err <code class="descname">cali_begin_double_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em>, double <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv224cali_begin_double_bynamePKcd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add <em>value</em> for the attribute with the name <em>attr_name</em> to the blackboard. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv221cali_begin_int_bynamePKci">
<span id="cali_begin_int_byname__cCP.i"></span><span class="target" id="calipergroup__AnnotationAPI_1gafafd0b8fc659290ec18847b3393f10ac"></span>cali_err <code class="descname">cali_begin_int_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em>, int <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv221cali_begin_int_bynamePKci" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv224cali_begin_string_bynamePKcPKc">
<span id="cali_begin_string_byname__cCP.cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga01134120a3aa5dec1fdf086ad2dcda65"></span>cali_err <code class="descname">cali_begin_string_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em>, <em class="property">const</em> char *<em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv224cali_begin_string_bynamePKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv222cali_set_double_bynamePKcd">
<span id="cali_set_double_byname__cCP.double"></span><span class="target" id="calipergroup__AnnotationAPI_1gaa530a24de3cc1d02ac38904b4557a498"></span>cali_err <code class="descname">cali_set_double_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em>, double <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv222cali_set_double_bynamePKcd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Change the value of attribute with the name <em>attr_name</em> to <em>value</em> on the blackboard. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv219cali_set_int_bynamePKci">
<span id="cali_set_int_byname__cCP.i"></span><span class="target" id="calipergroup__AnnotationAPI_1ga313d4ac7de89a280519e519e4bf56a1a"></span>cali_err <code class="descname">cali_set_int_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em>, int <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv219cali_set_int_bynamePKci" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv222cali_set_string_bynamePKcPKc">
<span id="cali_set_string_byname__cCP.cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga9fcc1dae5cbdfd5d97111a3681cd8831"></span>cali_err <code class="descname">cali_set_string_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em>, <em class="property">const</em> char *<em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv222cali_set_string_bynamePKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv215cali_end_bynamePKc">
<span id="cali_end_byname__cCP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga92873cb119ef053c3934ff33b21e8609"></span>cali_err <code class="descname">cali_end_byname</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>attr_name</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv215cali_end_bynamePKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove innermost value for attribute <em>attr</em> from the blackboard. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="macro">
<dt id="c.CALI_DATATRACKER_TRACK">
<span class="target" id="calipergroup__AnnotationAPI_1ga71349331af2fb31a489b9d5c9fece8bf"></span><code class="descname">CALI_DATATRACKER_TRACK</code><span class="sig-paren">(</span>ptr, size<span class="sig-paren">)</span> <a class="reference internal" href="#calipergroup__AnnotationAPI_1gaca7d5eaad1e2ac74da2e106bf1aa8ee3"><span class="std std-ref">cali_datatracker_track</span></a>(ptr, #ptr, size)<a class="headerlink" href="#c.CALI_DATATRACKER_TRACK" title="Permalink to this definition">¶</a></dt>
<dd><p>Label and track the given memory region. </p>
<p>Labels the memory region of size <em>size</em> bytes pointed to by <em>ptr</em> with the variable name of <em>ptr</em>. The memory region can then be tracked and resolved with the alloc service. </p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_DATATRACKER_TRACK_DIMENSIONAL">
<span class="target" id="calipergroup__AnnotationAPI_1ga54562618bbe7904e4c5d083755663075"></span><code class="descname">CALI_DATATRACKER_TRACK_DIMENSIONAL</code><span class="sig-paren">(</span>ptr, elem_size, dimensions, num_dimensions<span class="sig-paren">)</span> <a class="reference internal" href="#calipergroup__AnnotationAPI_1gab96e1b5f408d10601d0c74b6f13d7d6b"><span class="std std-ref">cali_datatracker_track_dimensional</span></a>(ptr, #ptr, elem_size, dimensions, num_dimensions)<a class="headerlink" href="#c.CALI_DATATRACKER_TRACK_DIMENSIONAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Label and track a multi-dimensional array. </p>
<p>Labels a multi-dimensional array with with the variable name of <em>ptr</em>. The array can then be tracked and resolved with the alloc service.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">elem_size</span></code>: Size of the array elements in bytes </li>
<li><code class="docutils literal"><span class="pre">dimension</span></code>: Array of type size_t[] with the sizes of each dimension. Must have <em>num_dimensions</em> entries. </li>
<li><code class="docutils literal"><span class="pre">num_dimensions</span></code>: The number of dimensions </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_DATATRACKER_UNTRACK">
<span class="target" id="calipergroup__AnnotationAPI_1ga8f2bf02741e096aa719b16a043dd7dd7"></span><code class="descname">CALI_DATATRACKER_UNTRACK</code><span class="sig-paren">(</span>ptr<span class="sig-paren">)</span> <a class="reference internal" href="#calipergroup__AnnotationAPI_1gaea9b6341c9553bdd2040506bb8fd4e29"><span class="std std-ref">cali_datatracker_untrack</span></a>(ptr)<a class="headerlink" href="#c.CALI_DATATRACKER_UNTRACK" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop tracking the memory region pointed to by <em>ptr</em>. </p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_CXX_MARK_FUNCTION">
<span class="target" id="calipergroup__AnnotationAPI_1ga9b665c9c3cdbfb1afe2bcc3e59e721ae"></span><code class="descname">CALI_CXX_MARK_FUNCTION</code> <a class="reference internal" href="#caliperclasscali_1_1Function"><span class="std std-ref">cali::Function</span></a> __cali_ann##__func__(__func__)<a class="headerlink" href="#c.CALI_CXX_MARK_FUNCTION" title="Permalink to this definition">¶</a></dt>
<dd><p>C++ macro to mark a function. </p>
<p>Mark begin and end of a function. Should be placed at the top of the function, and will automatically “close” the function at any return point. Will export the annotated function by name in the pre-defined <code class="docutils literal"><span class="pre">function</span></code> attribute. Only available in C++. </p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_CXX_MARK_LOOP_BEGIN">
<span class="target" id="calipergroup__AnnotationAPI_1ga54ddb303fd7d379e33bcd112b509ae63"></span><code class="descname">CALI_CXX_MARK_LOOP_BEGIN</code><span class="sig-paren">(</span>loop_id, name<span class="sig-paren">)</span> <a class="reference internal" href="#caliperclasscali_1_1Loop"><span class="std std-ref">cali::Loop</span></a> __cali_loop_##loop_id(name)<a class="headerlink" href="#c.CALI_CXX_MARK_LOOP_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark loop in C++. </p>
<p>Mark begin of a loop. Will export the user-provided loop name in the pre-defined <code class="docutils literal"><span class="pre">loop</span></code> attribute. This macro should be placed before the loop of interest, and <a class="reference internal" href="#calipergroup__AnnotationAPI_1gad7d753b24fe015222062129476072341"><span class="std std-ref">CALI_MARK_LOOP_END</span></a> should be placed after the loop.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: A loop identifier. Needed to refer to the loop from the <em>iteration</em> and <em>end</em> annotations. </li>
<li><code class="docutils literal"><span class="pre">name</span></code>: Name of the loop. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_CXX_MARK_LOOP_END">
<span class="target" id="calipergroup__AnnotationAPI_1gad5413aaa455192f874bf9a4a0910e656"></span><code class="descname">CALI_CXX_MARK_LOOP_END</code><span class="sig-paren">(</span>loop_id<span class="sig-paren">)</span> __cali_loop_##loop_id.end()<a class="headerlink" href="#c.CALI_CXX_MARK_LOOP_END" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark loop end in C++. </p>
<p>Mark end of a loop. Will export the user-provided loop name in the pre-defined <code class="docutils literal"><span class="pre">loop</span></code> attribute.</p>
<p>This macro should be placed after the loop of interest. Users must ensure proper begin/end matching: If the surrounding function can be exited from within the loop (e.g., from a <code class="docutils literal"><span class="pre">return</span></code> statement within the loop), an exit marker must be placed there as well.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: The loop identifier given to <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_CXX_MARK_LOOP_ITERATION">
<span class="target" id="calipergroup__AnnotationAPI_1ga5f1c8a89999cb44c50046056dbb5f633"></span><code class="descname">CALI_CXX_MARK_LOOP_ITERATION</code><span class="sig-paren">(</span>loop_id, iter<span class="sig-paren">)</span> cali::Loop::Iteration __cali_iter_##loop_id ( __cali_loop_##loop_id.iteration(static_cast&lt;int&gt;(iter)) )<a class="headerlink" href="#c.CALI_CXX_MARK_LOOP_ITERATION" title="Permalink to this definition">¶</a></dt>
<dd><p>C++ macro for a loop iteration. </p>
<p>Create a C++ annotation for a loop iteration. The loop must be marked with <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga54ddb303fd7d379e33bcd112b509ae63"><span class="std std-ref">CALI_CXX_MARK_LOOP_BEGIN</span></a> and <a class="reference internal" href="#calipergroup__AnnotationAPI_1gad5413aaa455192f874bf9a4a0910e656"><span class="std std-ref">CALI_CXX_MARK_LOOP_END</span></a>. This will export the loop’s iteration count given in <em>iter</em> in an attribute named <code class="docutils literal"><span class="pre">iteration#name</span></code>, where <em>name</em> is the loop name given in <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga54ddb303fd7d379e33bcd112b509ae63"><span class="std std-ref">CALI_CXX_MARK_LOOP_BEGIN</span></a>. The macro should be placed at the beginning of the loop block. The annotation will be closed automatically. Example:</p>
<p><div class="highlight-default"><div class="highlight"><pre><span class="n">CALI_CXX_MARK_LOOP_BEGIN</span><span class="p">(</span><span class="n">mainloop_id</span><span class="p">,</span> <span class="s">&quot;mainloop&quot;</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ITER</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">CALI_CXX_MARK_LOOP_ITERATION</span><span class="p">(</span><span class="n">mainloop_id</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
<span class="n">CALI_CXX_MARK_LOOP_END</span><span class="p">(</span><span class="n">mainloop_id</span><span class="p">);</span>
</pre></div>
</div>
</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: The loop identifier given to <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga54ddb303fd7d379e33bcd112b509ae63"><span class="std std-ref">CALI_CXX_MARK_LOOP_BEGIN</span></a> </li>
<li><code class="docutils literal"><span class="pre">iter</span></code>: The iteration number. Must be convertible to <code class="docutils literal"><span class="pre">int</span></code>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_FUNCTION_BEGIN">
<span class="target" id="calipergroup__AnnotationAPI_1ga8b5407ad0bd3b228455d07969537b969"></span><code class="descname">CALI_MARK_FUNCTION_BEGIN</code> if (cali_function_attr_id == CALI_INV_ID) \
        cali_init(); \
    cali_begin_string(cali_function_attr_id, __func__)<a class="headerlink" href="#c.CALI_MARK_FUNCTION_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark begin of a function. </p>
<p>Exports the annotated function’s name in the pre=defined <code class="docutils literal"><span class="pre">function</span></code> attribute. A <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga4c0b930345223797fef28eec10fcd24c"><span class="std std-ref">CALI_MARK_FUNCTION_END</span></a> marker must be placed at <em>all</em> function exit points. For C++, we recommend using <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga9b665c9c3cdbfb1afe2bcc3e59e721ae"><span class="std std-ref">CALI_CXX_MARK_FUNCTION</span></a> instead. <dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#calipergroup__AnnotationAPI_1ga4c0b930345223797fef28eec10fcd24c"><span class="std std-ref">CALI_MARK_FUNCTION_END</span></a>, <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga9b665c9c3cdbfb1afe2bcc3e59e721ae"><span class="std std-ref">CALI_CXX_MARK_FUNCTION</span></a> </dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_FUNCTION_END">
<span class="target" id="calipergroup__AnnotationAPI_1ga4c0b930345223797fef28eec10fcd24c"></span><code class="descname">CALI_MARK_FUNCTION_END</code> <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga323c619ef68d0e15e5f76a47f10ff4ac"><span class="std std-ref">cali_safe_end_string</span></a>(cali_function_attr_id, __func__)<a class="headerlink" href="#c.CALI_MARK_FUNCTION_END" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark end of a function. </p>
<p>Must be placed at <em>all</em> exit points of a function marked with <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga8b5407ad0bd3b228455d07969537b969"><span class="std std-ref">CALI_MARK_FUNCTION_BEGIN</span></a>. <dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#calipergroup__AnnotationAPI_1ga8b5407ad0bd3b228455d07969537b969"><span class="std std-ref">CALI_MARK_FUNCTION_BEGIN</span></a> </dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_LOOP_BEGIN">
<span class="target" id="calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"></span><code class="descname">CALI_MARK_LOOP_BEGIN</code><span class="sig-paren">(</span>loop_id, name<span class="sig-paren">)</span> if (cali_loop_attr_id == CALI_INV_ID) \
        cali_init(); \
    cali_begin_string(cali_loop_attr_id, (name));       \
    cali_id_t __cali_iter_##loop_id = \
        cali_make_loop_iteration_attribute(name);<a class="headerlink" href="#c.CALI_MARK_LOOP_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark a loop. </p>
<p>Mark begin of a loop. Will export the user-provided loop name in the pre-defined <code class="docutils literal"><span class="pre">loop</span></code> attribute. This macro should be placed before the loop of interest, and <a class="reference internal" href="#calipergroup__AnnotationAPI_1gad7d753b24fe015222062129476072341"><span class="std std-ref">CALI_MARK_LOOP_END</span></a> should be placed after the loop.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: A loop identifier. Needed to refer to the loop from the <em>iteration</em> and <em>end</em> annotations. </li>
<li><code class="docutils literal"><span class="pre">name</span></code>: Name of the loop. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_LOOP_END">
<span class="target" id="calipergroup__AnnotationAPI_1gad7d753b24fe015222062129476072341"></span><code class="descname">CALI_MARK_LOOP_END</code><span class="sig-paren">(</span>loop_id<span class="sig-paren">)</span> <a class="reference internal" href="#calipergroup__AnnotationAPI_1gada3168a2523b239babe32672e388ca01"><span class="std std-ref">cali_end</span></a>(cali_loop_attr_id)<a class="headerlink" href="#c.CALI_MARK_LOOP_END" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark a loop. </p>
<p>Mark end of a loop. Will export the user-provided loop name in the pre-defined <code class="docutils literal"><span class="pre">loop</span></code> attribute.</p>
<p>This macro should be placed after the loop of interest. Users must ensure proper begin/end matching: If the surrounding function can be exited from within the loop (e.g., from a <code class="docutils literal"><span class="pre">return</span></code> statement within the loop), an exit marker must be placed there as well.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: The loop identifier given to <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_ITERATION_BEGIN">
<span class="target" id="calipergroup__AnnotationAPI_1ga657e71331376533a3e1f030e6d1acec7"></span><code class="descname">CALI_MARK_ITERATION_BEGIN</code><span class="sig-paren">(</span>loop_id, iter<span class="sig-paren">)</span> cali_begin_int( __cali_iter_##loop_id, ((int) (iter)))<a class="headerlink" href="#c.CALI_MARK_ITERATION_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark begin of a loop iteration. </p>
<p>This annotation should be placed at the top inside of the loop body. The loop must be annotated with <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>. The iteration number will be exported in the attribute <code class="docutils literal"><span class="pre">iteration::name</span></code>, where <em>name</em> is the loop name given to <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>. In C++, we recommend using <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga5f1c8a89999cb44c50046056dbb5f633"><span class="std std-ref">CALI_CXX_MARK_LOOP_ITERATION</span></a>.</p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#calipergroup__AnnotationAPI_1ga6ac3f6a7ad35a386e1c09b62da3c4e97"><span class="std std-ref">CALI_MARK_ITERATION_END</span></a>, <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>, <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga5f1c8a89999cb44c50046056dbb5f633"><span class="std std-ref">CALI_CXX_MARK_LOOP_ITERATION</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: Loop identifier, must match the identifier given to <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>. </li>
<li><code class="docutils literal"><span class="pre">iter</span></code>: Current iteration number. This macro argument must be convertible to <code class="docutils literal"><span class="pre">int</span></code>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_ITERATION_END">
<span class="target" id="calipergroup__AnnotationAPI_1ga6ac3f6a7ad35a386e1c09b62da3c4e97"></span><code class="descname">CALI_MARK_ITERATION_END</code><span class="sig-paren">(</span>loop_id<span class="sig-paren">)</span> <a class="reference internal" href="#calipergroup__AnnotationAPI_1gada3168a2523b239babe32672e388ca01"><span class="std std-ref">cali_end</span></a>( __cali_iter_##loop_id )<a class="headerlink" href="#c.CALI_MARK_ITERATION_END" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark end of a loop iteration. </p>
<p>This annotation should be placed at the end inside of the loop body. If an iteration can be left prematurely (e.g., from a <code class="docutils literal"><span class="pre">continue</span></code>, <code class="docutils literal"><span class="pre">break</span></code>, or <code class="docutils literal"><span class="pre">return</span></code> statement), an end marker must be placed there as well.</p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#calipergroup__AnnotationAPI_1ga657e71331376533a3e1f030e6d1acec7"><span class="std std-ref">CALI_MARK_ITERATION_BEGIN</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">loop_id</span></code>: Loop identifier given in <a class="reference internal" href="#calipergroup__AnnotationAPI_1gac524ec4a11fae7b68edcacfdf790871a"><span class="std std-ref">CALI_MARK_LOOP_BEGIN</span></a>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_WRAP_STATEMENT">
<span class="target" id="calipergroup__AnnotationAPI_1gab966d75a5eb18aa984a1d5ddefb027df"></span><code class="descname">CALI_WRAP_STATEMENT</code><span class="sig-paren">(</span>name, statement<span class="sig-paren">)</span> if (cali_statement_attr_id == CALI_INV_ID) \
        cali_init(); \
    cali_begin_string(cali_statement_attr_id, (name));  \
    statement; \
    <a class="reference internal" href="#calipergroup__AnnotationAPI_1gada3168a2523b239babe32672e388ca01"><span class="std std-ref">cali_end</span></a>(cali_statement_attr_id);<a class="headerlink" href="#c.CALI_WRAP_STATEMENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap Caliper annotations around a C/C++ statement. </p>
<p>The wrapped statement will be annotated with the given <em>name</em> in the <code class="docutils literal"><span class="pre">statement</span></code> attribute. Example</p>
<p><div class="highlight-default"><div class="highlight"><pre><span class="n">double</span> <span class="n">res</span><span class="p">;</span>
<span class="o">/*</span> <span class="n">Wrap</span> <span class="n">the</span> <span class="n">sqrt</span><span class="p">()</span> <span class="n">call</span> <span class="o">*/</span>
<span class="n">CALI_WRAP_STATEMENT</span><span class="p">(</span> <span class="s">&quot;sqrt&quot;</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">49</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: The user-defined region name. Must be convertible into a <code class="docutils literal"><span class="pre">const</span> <span class="pre">char*</span></code>. </li>
<li><code class="docutils literal"><span class="pre">statement</span></code>: C/C++ statement(s) that should be wrapped. The statements must complete within the wrapped region, that is, they cannot branch out of the macro (e.g. with <code class="docutils literal"><span class="pre">goto</span></code>, <code class="docutils literal"><span class="pre">continue</span></code>, <code class="docutils literal"><span class="pre">break</span></code>, or <code class="docutils literal"><span class="pre">return</span></code>). </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_BEGIN">
<span class="target" id="calipergroup__AnnotationAPI_1ga640a1bcf0e40a455c694f438949ebe8a"></span><code class="descname">CALI_MARK_BEGIN</code><span class="sig-paren">(</span>name<span class="sig-paren">)</span> if (cali_annotation_attr_id == CALI_INV_ID) \
        cali_init(); \
    cali_begin_string(cali_annotation_attr_id, (name))<a class="headerlink" href="#c.CALI_MARK_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark begin of a user-defined code region. </p>
<p>This annotation should be placed before a code region of interest. The user-provided region name will be exported in the pre-defined <code class="docutils literal"><span class="pre">annotation</span></code> attribute.</p>
<p>Users must ensure proper nesting: Each CALI_MARK_BEGIN must be matched by a corresponding <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga485a7b6e380c57e7d1229fa1c71348b9"><span class="std std-ref">CALI_MARK_END</span></a> in the correct order. Regions may be nested within another, but they cannot overlap partially.</p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#calipergroup__AnnotationAPI_1ga485a7b6e380c57e7d1229fa1c71348b9"><span class="std std-ref">CALI_MARK_END</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: The region name. Must be convertible to <code class="docutils literal"><span class="pre">const</span> <span class="pre">char*</span></code>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.CALI_MARK_END">
<span class="target" id="calipergroup__AnnotationAPI_1ga485a7b6e380c57e7d1229fa1c71348b9"></span><code class="descname">CALI_MARK_END</code><span class="sig-paren">(</span>name<span class="sig-paren">)</span> <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga323c619ef68d0e15e5f76a47f10ff4ac"><span class="std std-ref">cali_safe_end_string</span></a>(cali_annotation_attr_id, (name))<a class="headerlink" href="#c.CALI_MARK_END" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark end of a user-defined code region. </p>
<p>This annotation should be placed after a code region of interest that has been annotated with <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga640a1bcf0e40a455c694f438949ebe8a"><span class="std std-ref">CALI_MARK_BEGIN</span></a>.</p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#calipergroup__AnnotationAPI_1ga640a1bcf0e40a455c694f438949ebe8a"><span class="std std-ref">CALI_MARK_BEGIN</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: The region name given to <a class="reference internal" href="#calipergroup__AnnotationAPI_1ga640a1bcf0e40a455c694f438949ebe8a"><span class="std std-ref">CALI_MARK_BEGIN</span></a>. The macro will check if the name matches, and report an error if it doesn’t. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv225cali_datatracker_allocatePKc6size_t">
<span id="cali_datatracker_allocate__cCP.s"></span><span class="target" id="calipergroup__AnnotationAPI_1ga8d1ec6ad5b89ec370b809bb4bce63c14"></span>void *<code class="descname">cali_datatracker_allocate</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>label</em>, size_t <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv225cali_datatracker_allocatePKc6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate and track the resulting allocation in Caliper.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>Tracking information will be automatically removed if the allocation is freed</dd>
<dt><strong>Return</strong></dt>
<dd>A new allocation of size <code class="docutils literal"><span class="pre">size</span></code> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">label</span></code>: The unique label with which to track the allocation requested </li>
<li><code class="docutils literal"><span class="pre">size</span></code>: The total size of the allocation requested </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv237cali_datatracker_allocate_dimensionalPKc6size_tPK6size_t6size_t">
<span id="cali_datatracker_allocate_dimensional__cCP.s.sCP.s"></span><span class="target" id="calipergroup__AnnotationAPI_1gab539209211ba9006aac3db8013b3f53d"></span>void *<code class="descname">cali_datatracker_allocate_dimensional</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>label</em>, size_t <em>elem_size</em>, <em class="property">const</em> size_t *<em>dimensions</em>, size_t <em>num_dimensions</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv237cali_datatracker_allocate_dimensionalPKc6size_tPK6size_t6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate and track the resulting allocation, with dimensions, in Caliper.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>Tracking information will be automatically removed if the allocation is freed</dd>
<dt><strong>Return</strong></dt>
<dd>A new allocation of size <code class="docutils literal"><span class="pre">product(dimensions)*elem_size</span></code> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">label</span></code>: The unique label with which to track the allocation requested </li>
<li><code class="docutils literal"><span class="pre">elem_size</span></code>: The size of an individual element in the allocation requested </li>
<li><code class="docutils literal"><span class="pre">dimensions</span></code>: An array of the dimensions of the allocation requested </li>
<li><code class="docutils literal"><span class="pre">num_dimensions</span></code>: The number of dimensions in <code class="docutils literal"><span class="pre">dimensions</span></code> </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv221cali_datatracker_freePv">
<span id="cali_datatracker_free__voidP"></span><span class="target" id="calipergroup__AnnotationAPI_1ga85420669a100cd7f4deb53f9eb5de95f"></span>void <code class="descname">cali_datatracker_free</code><span class="sig-paren">(</span>void *<em>ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv221cali_datatracker_freePv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free and untrack an allocation in Caliper.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">ptr</span></code>: The pointer to the beginning of the allocation to free/untrack </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv222cali_datatracker_trackPKvPKc6size_t">
<span id="cali_datatracker_track__voidCP.cCP.s"></span><span class="target" id="calipergroup__AnnotationAPI_1gaca7d5eaad1e2ac74da2e106bf1aa8ee3"></span>void <code class="descname">cali_datatracker_track</code><span class="sig-paren">(</span><em class="property">const</em> void *<em>ptr</em>, <em class="property">const</em> char *<em>label</em>, size_t <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv222cali_datatracker_trackPKvPKc6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Track an existing allocation in Caliper.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This will track the entire allocation pointed to by ptr. To track a subset of a larger allocation, use <code class="docutils literal"><span class="pre">cali_datatracker_track_dimensional</span></code>.</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">ptr</span></code>: The pointer to the beginning of the allocation to track </li>
<li><code class="docutils literal"><span class="pre">label</span></code>: The unique label with which to track the allocation </li>
<li><code class="docutils literal"><span class="pre">size</span></code>: Size of the allocation </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv234cali_datatracker_track_dimensionalPKvPKc6size_tPK6size_t6size_t">
<span id="cali_datatracker_track_dimensional__voidCP.cCP.s.sCP.s"></span><span class="target" id="calipergroup__AnnotationAPI_1gab96e1b5f408d10601d0c74b6f13d7d6b"></span>void <code class="descname">cali_datatracker_track_dimensional</code><span class="sig-paren">(</span><em class="property">const</em> void *<em>ptr</em>, <em class="property">const</em> char *<em>label</em>, size_t <em>elem_size</em>, <em class="property">const</em> size_t *<em>dimensions</em>, size_t <em>num_dimensions</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv234cali_datatracker_track_dimensionalPKvPKc6size_tPK6size_t6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Track an existing allocation in Caliper.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">ptr</span></code>: The pointer to the beginning of the allocation to track </li>
<li><code class="docutils literal"><span class="pre">label</span></code>: The unique label with which to track the allocation </li>
<li><code class="docutils literal"><span class="pre">elem_size</span></code>: The size of an individual element in the allocation </li>
<li><code class="docutils literal"><span class="pre">dimensions</span></code>: An array of the dimensions of the allocation </li>
<li><code class="docutils literal"><span class="pre">num_dimensions</span></code>: The number of dimensions in <code class="docutils literal"><span class="pre">dimensions</span></code> </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv224cali_datatracker_untrackPKv">
<span id="cali_datatracker_untrack__voidCP"></span><span class="target" id="calipergroup__AnnotationAPI_1gaea9b6341c9553bdd2040506bb8fd4e29"></span>void <code class="descname">cali_datatracker_untrack</code><span class="sig-paren">(</span><em class="property">const</em> void *<em>ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv224cali_datatracker_untrackPKv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Untrack a previously tracked allocation in Caliper.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">ptr</span></code>: The pointer to the beginning of the allocation to untrack </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Variables</p>
<dl class="member">
<dt id="_CPPv221cali_function_attr_id">
<span id="cali_function_attr_id__cali_id_t"></span><span class="target" id="calipergroup__AnnotationAPI_1ga88cb25fee73c53983a50c8adc452b9de"></span>cali_id_t <code class="descname">cali_function_attr_id</code><a class="headerlink" href="#_CPPv221cali_function_attr_id" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv217cali_loop_attr_id">
<span id="cali_loop_attr_id__cali_id_t"></span><span class="target" id="calipergroup__AnnotationAPI_1ga3bc09139775b7e4a21e1d2673e0f7559"></span>cali_id_t <code class="descname">cali_loop_attr_id</code><a class="headerlink" href="#_CPPv217cali_loop_attr_id" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv222cali_statement_attr_id">
<span id="cali_statement_attr_id__cali_id_t"></span><span class="target" id="calipergroup__AnnotationAPI_1ga94dec293d8a0fc1c17df5715a8cf8827"></span>cali_id_t <code class="descname">cali_statement_attr_id</code><a class="headerlink" href="#_CPPv222cali_statement_attr_id" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv223cali_annotation_attr_id">
<span id="cali_annotation_attr_id__cali_id_t"></span><span class="target" id="calipergroup__AnnotationAPI_1gabe133a608ada70087fcdae60b699194f"></span>cali_id_t <code class="descname">cali_annotation_attr_id</code><a class="headerlink" href="#_CPPv223cali_annotation_attr_id" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<dl class="class">
<dt id="_CPPv2N4cali8FunctionE">
<span id="cali::Function"></span><span class="target" id="caliperclasscali_1_1Function"></span><em class="property">class </em><code class="descname">Function</code><a class="headerlink" href="#_CPPv2N4cali8FunctionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;Annotation.h&gt;</em><p>Pre-defined function annotation class. </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv2N4cali4LoopE">
<span id="cali::Loop"></span><span class="target" id="caliperclasscali_1_1Loop"></span><em class="property">class </em><code class="descname">Loop</code><a class="headerlink" href="#_CPPv2N4cali4LoopE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;Annotation.h&gt;</em><p>Pre-defined loop annotation class, with optional iteration attribute. </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv2N4cali10AnnotationE">
<span class="target" id="caliperclasscali_1_1Annotation"></span><em class="property">class </em><code class="descname">Annotation</code><a class="headerlink" href="#_CPPv2N4cali10AnnotationE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;Annotation.h&gt;</em><p>Instrumentation interface to add and manipulate context attributes. </p>
<p>The Annotation class is the primary source-code instrumentation interface for Caliper. Annotation objects provide access to named Caliper context attributes. If the referenced attribute does not exist yet, it will be created automatically.</p>
<p>Example: <div class="highlight-default"><div class="highlight"><pre><span class="n">cali</span><span class="p">::</span><span class="n">Annotation</span> <span class="n">phase_ann</span><span class="p">(</span><span class="s">&quot;myprogram.phase&quot;</span><span class="p">);</span>

<span class="n">phase_ann</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="s">&quot;Initialization&quot;</span><span class="p">);</span>
  <span class="o">//</span> <span class="o">...</span>
<span class="n">phase_ann</span><span class="o">.</span><span class="n">end</span><span class="p">();</span>
</pre></div>
</div>
 This example creates an annotation object for the <code class="docutils literal"><span class="pre">myprogram.phase</span></code> attribute, and uses the <code class="docutils literal"><span class="pre">begin()/end</span></code>() methods to mark a section of code where that attribute is set to “Initialization”.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>Access to the underlying named context attribute through Annotation objects is not exclusive: multiple Annotation objects can reference and update the same context attribute. </dd>
</dl>
</p>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">begin() overloads</p>
<dl class="function">
<dt id="_CPPv2N10Annotation5beginEi">
<span id="Annotation::begin__i"></span><span class="target" id="caliperclasscali_1_1Annotation_1ae4ec47e183acef372dcf3d8782948836"></span>Annotation &amp;<code class="descname">begin</code><span class="sig-paren">(</span>int <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation5beginEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Begin <em>name</em>=<em>data</em> region for the associated context attribute. </p>
<p>Marks begin of the <em>name</em>=<em>data</em> region, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The new value will be nested under already open regions for the <em>name</em> context attribute. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation5beginEd">
<span id="Annotation::begin__double"></span><span class="target" id="caliperclasscali_1_1Annotation_1aa5ef80896f06fcc050d4f73a3190ec6d"></span>Annotation &amp;<code class="descname">begin</code><span class="sig-paren">(</span>double <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation5beginEd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Begin <em>name</em>=<em>data</em> region for the associated context attribute. </p>
<p>Marks begin of the <em>name</em>=<em>data</em> region, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The new value will be nested under already open regions for the <em>name</em> context attribute. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation5beginEPKc">
<span id="Annotation::begin__cCP"></span><span class="target" id="caliperclasscali_1_1Annotation_1a8c95f3c6c13a4fe1890873aff13420da"></span>Annotation &amp;<code class="descname">begin</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation5beginEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Begin <em>name</em>=<em>data</em> region for the associated context attribute. </p>
<p>Marks begin of the <em>name</em>=<em>data</em> region, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The new value will be nested under already open regions for the <em>name</em> context attribute. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation5beginERK7Variant">
<span id="Annotation::begin__VariantCR"></span><span class="target" id="caliperclasscali_1_1Annotation_1a0940d3327e5e32bd8f661caca0309822"></span>Annotation &amp;<code class="descname">begin</code><span class="sig-paren">(</span><em class="property">const</em> Variant &amp;<em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation5beginERK7Variant" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Begin <em>name</em>=<em>data</em> region for the associated context attribute. </p>
<p>Marks begin of the <em>name</em>=<em>data</em> region, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The new value will be nested under already open regions for the <em>name</em> context attribute. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">set() overloads</p>
<dl class="function">
<dt id="_CPPv2N10Annotation3setEi">
<span id="Annotation::set__i"></span><span class="target" id="caliperclasscali_1_1Annotation_1ab4915f8b21b92194e0f29effc3feec71"></span>Annotation &amp;<code class="descname">set</code><span class="sig-paren">(</span>int <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation3setEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set <em>name</em>=<em>data</em> for the associated context attribute. </p>
<p>Exports <em>name</em>=<em>data</em>, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The top-most prior open value for the <em>name</em> context attribute, if any, will be overwritten. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation3setEd">
<span id="Annotation::set__double"></span><span class="target" id="caliperclasscali_1_1Annotation_1a1228822d3e9b40f71c1be1864b51ccde"></span>Annotation &amp;<code class="descname">set</code><span class="sig-paren">(</span>double <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation3setEd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set <em>name</em>=<em>data</em> for the associated context attribute. </p>
<p>Exports <em>name</em>=<em>data</em>, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The top-most prior open value for the <em>name</em> context attribute, if any, will be overwritten. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation3setEPKc">
<span id="Annotation::set__cCP"></span><span class="target" id="caliperclasscali_1_1Annotation_1a7ab877463273227fc92bd5bb70d5cfea"></span>Annotation &amp;<code class="descname">set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation3setEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set <em>name</em>=<em>data</em> for the associated context attribute. </p>
<p>Exports <em>name</em>=<em>data</em>, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The top-most prior open value for the <em>name</em> context attribute, if any, will be overwritten. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation3setERK7Variant">
<span id="Annotation::set__VariantCR"></span><span class="target" id="caliperclasscali_1_1Annotation_1ac308f40d3365c6584aa1c39aa79c3a9d"></span>Annotation &amp;<code class="descname">set</code><span class="sig-paren">(</span><em class="property">const</em> Variant &amp;<em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation3setERK7Variant" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set <em>name</em>=<em>data</em> for the associated context attribute. </p>
<p>Exports <em>name</em>=<em>data</em>, where <em>name</em> is the attribute name given in <a class="reference internal" href="#caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"><span class="std std-ref">cali::Annotation::Annotation()</span></a>. The top-most prior open value for the <em>name</em> context attribute, if any, will be overwritten. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv2N10Annotation10AnnotationEPKci">
<span id="Annotation::Annotation__cCP.i"></span><span class="target" id="caliperclasscali_1_1Annotation_1a553bd2c44a58c6cc46aca2dec0dd22da"></span><code class="descname">Annotation</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em>, int <em>opt</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation10AnnotationEPKci" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Creates an annotation object to manipulate the context attribute with the given <em>name</em>. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: The attribute name </li>
<li><code class="docutils literal"><span class="pre">opt</span></code>: Attribute flags. Bitwise OR combination of <a class="reference internal" href="#calipercali__types_8h_1ad496a3cf9ac87b91770747b187b5c5ca"><span class="std std-ref">cali_attr_properties</span></a> values. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv2N10Annotation3endEv">
<span id="Annotation::end"></span><span class="target" id="caliperclasscali_1_1Annotation_1aa52934fcabfcff84e25bbcbff6351433"></span>void <code class="descname">end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N10Annotation3endEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Close top-most open region for the associated context attribute. </p>
</dd></dl>

</div>
<dl class="class">
<dt id="_CPPv2N4cali10Annotation5GuardE">
<span id="cali::Annotation::Guard"></span><span class="target" id="caliperclasscali_1_1Annotation_1_1Guard"></span><em class="property">class </em><code class="descname">Guard</code><a class="headerlink" href="#_CPPv2N4cali10Annotation5GuardE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;Annotation.h&gt;</em><p>Scope guard to automatically close an annotation at the end of the C++ scope. </p>
<p>Example: <div class="highlight-default"><div class="highlight"><pre><span class="nb">int</span> <span class="n">var</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cali</span><span class="p">::</span><span class="n">Annotation</span><span class="p">::</span><span class="n">Guard</span> 
    <span class="n">g</span><span class="p">(</span> <span class="n">cali</span><span class="p">::</span><span class="n">Annotation</span><span class="p">(</span><span class="s">&quot;myvar&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="p">);</span> 
  <span class="o">//</span> <span class="n">Sets</span> <span class="s">&quot;myvar=&lt;var&gt;&quot;</span> <span class="ow">and</span> <span class="n">automatically</span> <span class="n">closes</span> <span class="n">it</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">loop</span>
<span class="p">}</span>
</pre></div>
</div>
 </p>
</dd></dl>

</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/caliper-logo-small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Source-code Annotations</a><ul>
<li><a class="reference internal" href="#high-level-annotations">High-level Annotations</a><ul>
<li><a class="reference internal" href="#function-annotations">Function Annotations</a></li>
<li><a class="reference internal" href="#loop-annotations">Loop Annotations</a></li>
<li><a class="reference internal" href="#code-region-annotations">Code-region Annotations</a></li>
<li><a class="reference internal" href="#nesting">Nesting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#low-level-annotation-api">Low-level Annotation API</a><ul>
<li><a class="reference internal" href="#attribute-keys">Attribute keys</a></li>
<li><a class="reference internal" href="#c-annotation-api">C annotation API</a></li>
<li><a class="reference internal" href="#fortran-annotation-api">Fortran annotation API</a><ul>
<li><a class="reference internal" href="#fortran-api-example">Fortran API example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">C++ annotation API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-tracking-api">Data tracking API</a></li>
<li><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="workflow.html"
                        title="previous chapter">Architecture and Workflow</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="next chapter">Runtime Configuration</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/AnnotationAPI.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="configuration.html" title="Runtime Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="workflow.html" title="Architecture and Workflow"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.0.0-dev documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2016, Lawrence Livermore National Laboratory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>