<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Concepts &mdash; Caliper 1.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Caliper 1.5.0 documentation" href="index.html" />
    <link rel="next" title="Annotation API" href="api.html" />
    <link rel="prev" title="Getting started" href="usage.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="api.html" title="Annotation API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Getting started"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 1.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="concepts">
<h1>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h1>
<p>To utilize Caliper effectively, it is helpful to familiarize yourself
with the following concepts:</p>
<div class="section" id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h2>
<p>Attributes are the basic element in Caliper&#8217;s data model. Essentially,
attributes are <em>key:value</em> pairs.</p>
<p><em>Attribute keys</em> have a unique name, which serves as identifier for
attributes. The key also define the attributes&#8217; datatype, and carries
additional property flags and optional metadata.</p>
<p>Attributes are identified through their name. Therefore, it is
important to choose unique names for attributes. Caliper is designed
to let independent program components access any attribute only
through its name, without introducing compile-time data
dependencies. However, this makes inadvertent name conflicts difficult
to detect.</p>
<div class="section" id="datatypes">
<h3>Datatypes<a class="headerlink" href="#datatypes" title="Permalink to this headline">¶</a></h3>
<p>The attribute key defines the datatype of an attribute. Only matching
values can be assigned; e.g. it is not possible to assign string
values to integer-type attribute keys.</p>
<p>Caliper supports integer (signed and unsigned), double-precision
floating point, pointer/address, boolean/logical, and string
datatypes. It is also possible to store raw binary data.</p>
</div>
<div class="section" id="hierarchical-stacked-values">
<h3>Hierarchical/stacked values<a class="headerlink" href="#hierarchical-stacked-values" title="Permalink to this headline">¶</a></h3>
<p>Values can be stacked to express hierarchical concepts. The
<code class="docutils literal"><span class="pre">begin/end</span></code> function pairs in Caliper&#8217;s APIs behave like a stack
interface: with <code class="docutils literal"><span class="pre">begin</span></code>, a new value will be added on top of the
stack, while <code class="docutils literal"><span class="pre">end</span></code> removes the top-most value. For example, we can
create an attribute to track the call stack:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">bar</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">cali_begin_string_byname</span><span class="p">(</span><span class="s">&quot;callstack&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">);</span>
  <span class="c1">// ...</span>
  <span class="n">cali_end_byname</span><span class="p">(</span><span class="s">&quot;callstack&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">cali_begin_string_byname</span><span class="p">(</span><span class="s">&quot;callstack&quot;</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">);</span>
  <span class="n">bar</span><span class="p">();</span>
  <span class="n">cali_end_byname</span><span class="p">(</span><span class="s">&quot;callstack&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">cali_begin_string_byname</span><span class="p">(</span><span class="s">&quot;callstack&quot;</span><span class="p">,</span> <span class="s">&quot;main&quot;</span><span class="p">);</span>
  <span class="n">bar</span><span class="p">();</span>
  <span class="n">foo</span><span class="p">();</span>
  <span class="n">cali_end_byname</span><span class="p">(</span><span class="s">&quot;callstack&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Assuming we take a snapshot with each update of the <code class="docutils literal"><span class="pre">callstack</span></code>
attribute, we will get the following sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">callstack</span><span class="o">=</span><span class="n">main</span>
<span class="n">callstack</span><span class="o">=</span><span class="n">main</span><span class="o">/</span><span class="n">bar</span>
<span class="n">callstack</span><span class="o">=</span><span class="n">main</span>
<span class="n">callstack</span><span class="o">=</span><span class="n">main</span><span class="o">/</span><span class="n">foo</span>
<span class="n">callstack</span><span class="o">=</span><span class="n">main</span><span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">bar</span>
<span class="n">callstack</span><span class="o">=</span><span class="n">main</span><span class="o">/</span><span class="n">foo</span>
<span class="n">callstack</span><span class="o">=</span><span class="n">main</span>
</pre></div>
</div>
<p>Stacks are <em>per-attribute</em>, i.e., each attribute key has its own,
independent stack. (In fact, thread-scope attributes (see below) have
a stack for each attribute on each thread).</p>
<p>To avoid stacking, use the <code class="docutils literal"><span class="pre">set</span></code> functions; these will just
overwrite the current (top-most) attribute value.</p>
<p>Note that stacking is not possible for attributes with <code class="docutils literal"><span class="pre">ASVALUE</span></code>
storage (see below).</p>
</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>Caliper defines properties that can be assigned to each attribute key.
These properties define the way the attribute is processed or stored
by Caliper.</p>
<dl class="docutils">
<dt>Scope</dt>
<dd>The attribute scope defines whether the attribute should be
process-wide or thread-local. By default, an attribute is
thread-local.</dd>
<dt>Storage representation</dt>
<dd>By default, Caliper represents attributes on the blackboard and in
snapshot records as a reference into a generalized context
tree. With <code class="docutils literal"><span class="pre">ASVALUE</span></code> storage, the attribute will be explicitly
stored as a key/value pair.</dd>
<dt>Event processing</dt>
<dd>By default, Caliper executes event callback functions on attribute
updates. With the <code class="docutils literal"><span class="pre">SKIP_EVENTS</span></code> property, the event processing can
be disabled for the attribute.</dd>
</dl>
</div>
</div>
<div class="section" id="blackboard">
<h2>Blackboard<a class="headerlink" href="#blackboard" title="Permalink to this headline">¶</a></h2>
<p>The <em>blackboard</em> is a runtime buffer that combines all active
attributes. Caliper data providers (e.g., annotated source-code
components) and Caliper data users can create, update, delete or read
attributes on the blackboard independently and in parallel. Thus, the
blackboard enables a global view of all active attributes without
creating explicit compile-time or link-time dependencies between
different data providers, or data providers and data users.</p>
</div>
<div class="section" id="snapshots">
<h2>Snapshots<a class="headerlink" href="#snapshots" title="Permalink to this headline">¶</a></h2>
<p>A snapshot saves the blackboard contents at a specific point in the
execution of a target program. Snapshots can be triggered via
<code class="xref cpp cpp-func docutils literal"><span class="pre">Caliper::push_snapshot()</span></code> or
<code class="xref cpp cpp-func docutils literal"><span class="pre">Caliper::pull_snapshot()</span></code> methods. Snapshots can be triggered
asynchronously, independent of blackboard updates.</p>
<p>In addition to blackboard contents, Caliper can add <em>transient</em>
attributes to snapshots. This is done through the
<code class="xref cpp cpp-func docutils literal"><span class="pre">Caliper::Events::snapshot()</span></code> callback function, and is used
to add measurements such as timestamps to a snapshot.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/caliper-logo-small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Concepts</a><ul>
<li><a class="reference internal" href="#attributes">Attributes</a><ul>
<li><a class="reference internal" href="#datatypes">Datatypes</a></li>
<li><a class="reference internal" href="#hierarchical-stacked-values">Hierarchical/stacked values</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blackboard">Blackboard</a></li>
<li><a class="reference internal" href="#snapshots">Snapshots</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="usage.html"
                        title="previous chapter">Getting started</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">Annotation API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/concepts.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="api.html" title="Annotation API"
             >next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Getting started"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 1.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015-2016, Lawrence Livermore National Laboratory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>