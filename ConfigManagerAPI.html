
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>ConfigManager API reference &#8212; Caliper 2.5.0-dev documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fortran support" href="FortranSupport.html" />
    <link rel="prev" title="Annotation API reference" href="AnnotationAPI.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="FortranSupport.html" title="Fortran support"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="AnnotationAPI.html" title="Annotation API reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.5.0-dev documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configmanager-api-reference">
<h1>ConfigManager API reference<a class="headerlink" href="#configmanager-api-reference" title="Permalink to this headline">¶</a></h1>
<p>Caliper provides several built-in performance measurement and reporting
configurations. These can be activated from within a program with the
<cite>ConfigManager</cite> API using a short configuration string. Configuration
strings can be hard-coded in the program or provided by the user in some
form, e.g. as a command-line parameter or in the programs’s configuration
file.</p>
<p>To access and control the built-in configurations, create a
<a class="reference internal" href="#_CPPv4N4cali13ConfigManagerE" title="cali::ConfigManager"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">cali::ConfigManager</span></code></a> object. Add a configuration string with <cite>add()</cite>,
start the requested configuration channels with <cite>start()</cite>, and trigger
output with <cite>flush()</cite>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;caliper/cali-manager.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
   <span class="n">cali</span><span class="o">::</span><span class="n">ConfigManager</span> <span class="n">mgr</span><span class="p">;</span>

   <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
      <span class="n">mgr</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">mgr</span><span class="p">.</span><span class="n">error</span><span class="p">())</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Config error: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">mgr</span><span class="p">.</span><span class="n">error_msg</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
   <span class="c1">// ...</span>
   <span class="n">mgr</span><span class="p">.</span><span class="n">start</span><span class="p">();</span> <span class="c1">// start requested performance measurement channels</span>
   <span class="c1">// ... (program execution)</span>
   <span class="n">mgr</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span> <span class="c1">// write performance results</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="group">
<dt>
<span class="target" id="group__ControlChannelAPI"></span><em>group</em> <code class="sig-name descname">ControlChannelAPI</code></dt>
<dd><p>An API for controlling Caliper built-in performance measurement configurations. </p>
<p>The control channel API provides means to access and control built-in Caliper configurations and enable measurements from within a target program. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv4N4cali23add_global_config_specsEPPKN13ConfigManager10ConfigInfoE">
<span id="_CPPv3N4cali23add_global_config_specsEPPKN13ConfigManager10ConfigInfoE"></span><span id="_CPPv2N4cali23add_global_config_specsEPPKN13ConfigManager10ConfigInfoE"></span><span id="cali::add_global_config_specs__ConfigManager::ConfigInfoCPP"></span><span class="target" id="group__ControlChannelAPI_1ga0b564ef18479917391909fcc46c7d4fa"></span>void <code class="sig-name descname">add_global_config_specs</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N4cali13ConfigManagerE" title="cali::ConfigManager">ConfigManager</a>::<a class="reference internal" href="#_CPPv4N4cali13ConfigManager10ConfigInfoE" title="cali::ConfigManager::ConfigInfo">ConfigInfo</a> **<em>configs</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali23add_global_config_specsEPPKN13ConfigManager10ConfigInfoE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a set of global <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> configs. </p>
</dd></dl>

</div>
<dl class="class">
<dt id="_CPPv4N4cali17ChannelControllerE">
<span id="_CPPv3N4cali17ChannelControllerE"></span><span id="_CPPv2N4cali17ChannelControllerE"></span><span id="cali::ChannelController"></span><span class="target" id="classcali_1_1ChannelController"></span><em class="property">class </em><code class="sig-name descname">ChannelController</code><a class="headerlink" href="#_CPPv4N4cali17ChannelControllerE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;ChannelController.h&gt;</em><p>Base class for Caliper channel controllers. </p>
<p>A channel controller wraps a Caliper configuration and channel. The underlying channel is initially inactive, and will be created in the first call of the <a class="reference internal" href="#classcali_1_1ChannelController_1a18974f665205d0c92a0d44bb65e4f416"><span class="std std-ref">start()</span></a> method. Derived classes can modify the configuration before the channel is created.</p>
<p><a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> objects can be copied and moved. The underlying Caliper channel will be deleted when the last <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> object referencing is destroyed. </p>
<p>Subclassed by <a class="reference internal" href="#classcali_1_1RegionProfile"><span class="std std-ref">cali::RegionProfile</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N4cali17ChannelController5startEv">
<span id="_CPPv3N4cali17ChannelController5startEv"></span><span id="_CPPv2N4cali17ChannelController5startEv"></span><span id="cali::ChannelController::start"></span><span class="target" id="classcali_1_1ChannelController_1a18974f665205d0c92a0d44bb65e4f416"></span>void <code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali17ChannelController5startEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create and activate the Caliper channel, or reactivate a stopped Caliper channel. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali17ChannelController4stopEv">
<span id="_CPPv3N4cali17ChannelController4stopEv"></span><span id="_CPPv2N4cali17ChannelController4stopEv"></span><span id="cali::ChannelController::stop"></span><span class="target" id="classcali_1_1ChannelController_1ad9a092004fb9e6dbca740c9b966bef37"></span>void <code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali17ChannelController4stopEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Deactivate the Caliper channel. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali17ChannelController9is_activeEv">
<span id="_CPPv3NK4cali17ChannelController9is_activeEv"></span><span id="_CPPv2NK4cali17ChannelController9is_activeEv"></span><span id="cali::ChannelController::is_activeC"></span><span class="target" id="classcali_1_1ChannelController_1a8e7d283e9c038ec7c4c338889bf3703f"></span>bool <code class="sig-name descname">is_active</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali17ChannelController9is_activeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if channel exists and is active, false otherwise. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali17ChannelController4nameEv">
<span id="_CPPv3NK4cali17ChannelController4nameEv"></span><span id="_CPPv2NK4cali17ChannelController4nameEv"></span><span id="cali::ChannelController::nameC"></span><span class="target" id="classcali_1_1ChannelController_1a80c6db22d48a4b6e5b6ef60b111534e6"></span>std::string <code class="sig-name descname">name</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali17ChannelController4nameEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the name of the underlying channel. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali17ChannelController5flushEv">
<span id="_CPPv3N4cali17ChannelController5flushEv"></span><span id="_CPPv2N4cali17ChannelController5flushEv"></span><span id="cali::ChannelController::flush"></span><span class="target" id="classcali_1_1ChannelController_1a2351b863e1caf4f7d8a2ff1bca1310cb"></span><em class="property">virtual</em> void <code class="sig-name descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali17ChannelController5flushEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flush the underlying Caliper channel. </p>
<p>Allows derived classes to implement custom Caliper data processing. The base class implementation invokes Caliper::flush_and_write(). </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali17ChannelController17ChannelControllerEPKciRK12config_map_t">
<span id="_CPPv3N4cali17ChannelController17ChannelControllerEPKciRK12config_map_t"></span><span id="_CPPv2N4cali17ChannelController17ChannelControllerEPKciRK12config_map_t"></span><span id="cali::ChannelController::ChannelController__cCP.i.config_map_tCR"></span><span class="target" id="classcali_1_1ChannelController_1a4c492f9f6b51415a4fd8c06c55ce873c"></span><code class="sig-name descname">ChannelController</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em>, int <em>flags</em>, <em class="property">const</em> config_map_t &amp;<em>cfg</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali17ChannelController17ChannelControllerEPKciRK12config_map_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create channel controller with given name, flags, and config. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv4N4cali13ConfigManagerE">
<span id="_CPPv3N4cali13ConfigManagerE"></span><span id="_CPPv2N4cali13ConfigManagerE"></span><span id="cali::ConfigManager"></span><span class="target" id="classcali_1_1ConfigManager"></span><em class="property">class </em><code class="sig-name descname">ConfigManager</code><a class="headerlink" href="#_CPPv4N4cali13ConfigManagerE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;ConfigManager.h&gt;</em><p>Configure, enable, and manage built-in or custom Caliper configurations. </p>
<p><a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> is the principal component for managing Caliper measurement configurations programmatically. It parses a configuration string and creates a set of control channels for the requested measurement configurations, and provides control methods to start, stop, and flush the created measurements channels. Example:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cali</span><span class="p">::</span><span class="n">ConfigManager</span> <span class="n">mgr</span><span class="p">;</span>

<span class="o">//</span>   <span class="n">Add</span> <span class="n">a</span> <span class="n">configuration</span> <span class="n">string</span> <span class="n">creating</span> <span class="n">a</span> <span class="n">runtime</span> <span class="n">report</span>
<span class="o">//</span> <span class="ow">and</span> <span class="n">event</span> <span class="n">trace</span> <span class="n">channel</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;runtime-report,event-trace(output=trace.cali)&quot;</span><span class="p">);</span>

<span class="o">//</span> <span class="n">Check</span> <span class="k">for</span> <span class="n">configuration</span> <span class="n">string</span> <span class="n">parse</span> <span class="n">errors</span>
<span class="k">if</span> <span class="p">(</span><span class="n">mgr</span><span class="o">.</span><span class="n">error</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">std</span><span class="p">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;ConfigManager: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">mgr</span><span class="o">.</span><span class="n">error_msg</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">Activate</span> <span class="nb">all</span> <span class="n">requested</span> <span class="n">configuration</span> <span class="n">channels</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>

<span class="o">//</span> <span class="o">...</span>

<span class="o">//</span>   <span class="n">Trigger</span> <span class="n">output</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">configured</span> <span class="n">channel</span> <span class="n">controllers</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Must</span> <span class="n">be</span> <span class="n">done</span> <span class="n">explicitly</span><span class="p">,</span> <span class="n">the</span> <span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">Caliper</span> <span class="n">configurations</span> <span class="n">do</span> <span class="ow">not</span>
<span class="o">//</span> <span class="ow">not</span> <span class="n">flush</span> <span class="n">results</span> <span class="n">automatically</span><span class="o">.</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
</pre></div>
</div>
</p>
<p><a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> provides a set of built-in configurations specifications like “runtime-report”. Users can also add custom specifications with <a class="reference internal" href="#classcali_1_1ConfigManager_1a6f2a0b95e6aaae76829be4f936be0082"><span class="std std-ref">add_config_spec()</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Types</p>
<dl class="type">
<dt id="_CPPv4N4cali13ConfigManager14CreateConfigFnE">
<span id="_CPPv3N4cali13ConfigManager14CreateConfigFnE"></span><span id="_CPPv2N4cali13ConfigManager14CreateConfigFnE"></span><span id="cali::ConfigManager::CreateConfigFn"></span><span class="target" id="classcali_1_1ConfigManager_1a0e601823a4c02307f31c57f749671c0f"></span><em class="property">typedef </em>cali::<a class="reference internal" href="#_CPPv4N4cali17ChannelControllerE" title="cali::ChannelController">ChannelController</a> *(*<code class="sig-name descname">CreateConfigFn</code>)<span class="sig-paren">(</span><em class="property">const</em> char *name, <em class="property">const</em> config_map_t &amp;initial_cfg, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N4cali13ConfigManager7OptionsE" title="cali::ConfigManager::Options">Options</a> &amp;opts<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager14CreateConfigFnE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback function to create a custom <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> for a config. </p>
<p>Example: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cali</span><span class="p">::</span><span class="n">ChannelController</span><span class="o">*</span> <span class="n">make_controller</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span>
        <span class="n">const</span> <span class="n">cali</span><span class="p">::</span><span class="n">config_map_t</span><span class="o">&amp;</span> <span class="n">initial_cfg</span><span class="p">,</span>
        <span class="n">const</span> <span class="n">cali</span><span class="p">::</span><span class="n">ConfigManager</span><span class="p">::</span><span class="n">Options</span><span class="o">&amp;</span> <span class="n">opts</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">MyChannelController</span> <span class="p">:</span> <span class="n">public</span> <span class="n">cali</span><span class="p">::</span><span class="n">ChannelController</span> <span class="p">{</span>
    <span class="n">public</span><span class="p">:</span>
        <span class="n">MyChannelController</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span>
                <span class="n">const</span> <span class="n">cali</span><span class="p">::</span><span class="n">config_map_t</span><span class="o">&amp;</span> <span class="n">initial_cfg</span><span class="p">,</span>
                <span class="n">const</span> <span class="n">cali</span><span class="p">::</span><span class="n">ConfigManager</span><span class="p">::</span><span class="n">Options</span><span class="o">&amp;</span> <span class="n">opts</span><span class="p">)</span>
            <span class="p">:</span> <span class="n">cali</span><span class="p">::</span><span class="n">ChannelController</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">initial_cfg</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">opts</span><span class="o">.</span><span class="n">update_channel_config</span><span class="p">(</span><span class="n">config</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="n">new</span> <span class="n">MyChannelController</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">initial_cfg</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>A new <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> object. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The channel name. Must be passed to the created <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial_cfg</span></code>: The initial config map from the config’s JSON spec. Must be passed to the created <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opts</span></code>: User-requested options for the channel. Invoke <a class="reference internal" href="#classcali_1_1ConfigManager_1_1Options_1a30f2b804a3567e85083be4e4675d3f04"><span class="std std-ref">Options::update_channel_config(config_map_t&amp;) const</span></a> on the <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a>’s config map to apply options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="type">
<dt id="_CPPv4N4cali13ConfigManager11CheckArgsFnE">
<span id="_CPPv3N4cali13ConfigManager11CheckArgsFnE"></span><span id="_CPPv2N4cali13ConfigManager11CheckArgsFnE"></span><span id="cali::ConfigManager::CheckArgsFn"></span><span class="target" id="classcali_1_1ConfigManager_1afff35519d2728dea4f4042e30b636ad9"></span><em class="property">typedef </em>std::string (*<code class="sig-name descname">CheckArgsFn</code>)<span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N4cali13ConfigManager7OptionsE" title="cali::ConfigManager::Options">Options</a> &amp;opts<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager11CheckArgsFnE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback function to implement custom options checking for a config spec. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager13ConfigManagerEPKc">
<span id="_CPPv3N4cali13ConfigManager13ConfigManagerEPKc"></span><span id="_CPPv2N4cali13ConfigManager13ConfigManagerEPKc"></span><span id="cali::ConfigManager::ConfigManager__cCP"></span><span class="target" id="classcali_1_1ConfigManager_1a6c1b208cf51be22f6e4e30a252cdc74a"></span><code class="sig-name descname">ConfigManager</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>config_string</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager13ConfigManagerEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> and add the given configuration string. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager15add_config_specERK10ConfigInfo">
<span id="_CPPv3N4cali13ConfigManager15add_config_specERK10ConfigInfo"></span><span id="_CPPv2N4cali13ConfigManager15add_config_specERK10ConfigInfo"></span><span id="cali::ConfigManager::add_config_spec__ConfigInfoCR"></span><span class="target" id="classcali_1_1ConfigManager_1a6f2a0b95e6aaae76829be4f936be0082"></span>void <code class="sig-name descname">add_config_spec</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N4cali13ConfigManager10ConfigInfoE" title="cali::ConfigManager::ConfigInfo">ConfigInfo</a> &amp;<em>info</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager15add_config_specERK10ConfigInfo" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a custom config spec to this <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a>. </p>
<p>Adds a new Caliper configuration specification for this <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> using a custom <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> or option checking function. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager15add_config_specEPKc">
<span id="_CPPv3N4cali13ConfigManager15add_config_specEPKc"></span><span id="_CPPv2N4cali13ConfigManager15add_config_specEPKc"></span><span id="cali::ConfigManager::add_config_spec__cCP"></span><span class="target" id="classcali_1_1ConfigManager_1aae411b5e08277f0f8d56a3acf5f1fad6"></span>void <code class="sig-name descname">add_config_spec</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>json</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager15add_config_specEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a JSON config spec to this <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a>. </p>
<p>Adds a new Caliper configuration specification for this <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> using a basic <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a>.</p>
<p>This example adds a config spec to perform simple sample tracing: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">spec</span> <span class="o">=</span>
  <span class="s2">&quot;{&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">name</span><span class="se">\&quot;</span><span class="s2">        : </span><span class="se">\&quot;</span><span class="s2">sampletracing</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">description</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">Perform sample tracing</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">services</span><span class="se">\&quot;</span><span class="s2">    : [ </span><span class="se">\&quot;</span><span class="s2">recorder</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">sampler</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">trace</span><span class="se">\&quot;</span><span class="s2"> ],&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">config</span><span class="se">\&quot;</span><span class="s2">      :</span>
  <span class="s2">&quot;  { </span><span class="se">\&quot;</span><span class="s2">CALI_SAMPLER_FREQUENCY</span><span class="se">\&quot;</span><span class="s2">     : </span><span class="se">\&quot;</span><span class="s2">100</span><span class="se">\&quot;</span><span class="s2">,  &quot;</span>
  <span class="s2">&quot;    </span><span class="se">\&quot;</span><span class="s2">CALI_CHANNEL_FLUSH_ON_EXIT</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">false</span><span class="se">\&quot;</span><span class="s2"> &quot;</span>
  <span class="s2">&quot;  },&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">categories</span><span class="se">\&quot;</span><span class="s2">  : [ </span><span class="se">\&quot;</span><span class="s2">output</span><span class="se">\&quot;</span><span class="s2"> ],&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">defaults</span><span class="se">\&quot;</span><span class="s2">    : { </span><span class="se">\&quot;</span><span class="s2">sample.threads</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">true</span><span class="se">\&quot;</span><span class="s2"> }, &quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">options</span><span class="se">\&quot;</span><span class="s2">     : &quot;</span>
  <span class="s2">&quot; [ &quot;</span>
  <span class="s2">&quot;  { </span><span class="se">\&quot;</span><span class="s2">name</span><span class="se">\&quot;</span><span class="s2">        : </span><span class="se">\&quot;</span><span class="s2">sample.threads</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot;    </span><span class="se">\&quot;</span><span class="s2">description</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">Sample all threads</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot;    </span><span class="se">\&quot;</span><span class="s2">type</span><span class="se">\&quot;</span><span class="s2">        : </span><span class="se">\&quot;</span><span class="s2">bool</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot;    </span><span class="se">\&quot;</span><span class="s2">services</span><span class="se">\&quot;</span><span class="s2">    : [ </span><span class="se">\&quot;</span><span class="s2">pthread</span><span class="se">\&quot;</span><span class="s2"> ]&quot;</span>
  <span class="s2">&quot;  }&quot;</span>
  <span class="s2">&quot; ]&quot;</span>
  <span class="s2">&quot;}&quot;</span><span class="p">;</span>

<span class="n">ConfigManager</span> <span class="n">mgr</span><span class="p">;</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">add_config_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">);</span>

<span class="o">//</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">thread</span> <span class="n">sampling</span> <span class="n">channel</span> <span class="n">using</span> <span class="n">the</span> <span class="n">spec</span> <span class="ow">and</span> <span class="n">start</span> <span class="n">recording</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;sampletracing(sample.threads=true,output=trace.cali)&quot;</span><span class="p">);</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>
<span class="o">//</span> <span class="o">...</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
</pre></div>
</div>
</p>
<p><p>If there was an error parsing the config spec, the </p>
<a class="reference internal" href="#classcali_1_1ConfigManager_1a97c868ccc56aa73d73492c84c56201c5"><span class="std std-ref">error()</span></a> method will return <em>true</em> and an error message can be retrieved with <a class="reference internal" href="#classcali_1_1ConfigManager_1aab4f5155356431d29dc03b66bad58e0c"><span class="std std-ref">error_msg()</span></a>. <dl class="simple">
<dt><strong>Config specification syntax</strong></dt><dd><p>The config spec is a JSON dictionary with the following elements: <ul class="simple">
<li><p><em>name:</em> Name of the config spec. </p></li>
<li><p><em>description:</em> A short one-line description. Included in the documentation string generated by <a class="reference internal" href="#classcali_1_1ConfigManager_1ac927cd656e656197b5b98bc58f9bbba5"><span class="std std-ref">get_documentation_for_spec()</span></a>. </p></li>
<li><p><em>services:</em> List of Caliper services this config requires. Note that the config will only be available if all required services are present in Caliper. </p></li>
<li><p><em>config:</em> A dictionary with Caliper configuration variables required for this config. Note that services will be added automatically based on the <em>services</em> entry. </p></li>
<li><p><em>categories:</em> A list of option categories. Defines which options, in addition to the ones defined inside the config spec, apply to this config. The example above uses the “output” category, which makes the built-in <em>output</em> option for setting output file names available. </p></li>
<li><p><em>defaults:</em> A dict with default values for any of the config’s options. <a class="reference internal" href="#classcali_1_1ConfigManager_1_1Options"><span class="std std-ref">Options</span></a> not listed here default to empty/not set. </p></li>
<li><p><em>options:</em> A list of custom options for this config.</p></li>
</ul>
</p>
</dd>
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classcali_1_1ConfigManager_1aa3bba9fba281beb05ea7730874c1aa12"><span class="std std-ref">add_option_spec()</span></a></p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager15add_option_specEPKc">
<span id="_CPPv3N4cali13ConfigManager15add_option_specEPKc"></span><span id="_CPPv2N4cali13ConfigManager15add_option_specEPKc"></span><span id="cali::ConfigManager::add_option_spec__cCP"></span><span class="target" id="classcali_1_1ConfigManager_1aa3bba9fba281beb05ea7730874c1aa12"></span>void <code class="sig-name descname">add_option_spec</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>json</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager15add_option_specEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a JSON option spec to this ConfigManager. </p>
<p>Allows one to define options for any config in a matching category. Option specifications must be added before querying or creating any configurations to be effective. If there was an error parsing the config spec, the <a class="reference internal" href="#classcali_1_1ConfigManager_1a97c868ccc56aa73d73492c84c56201c5"><span class="std std-ref">error()</span></a> method will return <em>true</em> and an error message can be retrieved with <a class="reference internal" href="#classcali_1_1ConfigManager_1aab4f5155356431d29dc03b66bad58e0c"><span class="std std-ref">error_msg()</span></a>. The following example adds a metric option to compute instructions counts using the papi service:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">spec</span> <span class="o">=</span>
  <span class="s2">&quot;{&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">name</span><span class="se">\&quot;</span><span class="s2">        : </span><span class="se">\&quot;</span><span class="s2">count.instructions</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">category</span><span class="se">\&quot;</span><span class="s2">    : </span><span class="se">\&quot;</span><span class="s2">metric</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">description</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">Count total instructions</span><span class="se">\&quot;</span><span class="s2">,&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">services</span><span class="se">\&quot;</span><span class="s2">    : [ </span><span class="se">\&quot;</span><span class="s2">papi</span><span class="se">\&quot;</span><span class="s2"> ],&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">config</span><span class="se">\&quot;</span><span class="s2">      : { </span><span class="se">\&quot;</span><span class="s2">CALI_PAPI_COUNTERS</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">PAPI_TOT_INS</span><span class="se">\&quot;</span><span class="s2"> },&quot;</span>
  <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">query_args</span><span class="se">\&quot;</span><span class="s2">  : &quot;</span>
  <span class="s2">&quot; [&quot;</span>
  <span class="s2">&quot;  { </span><span class="se">\&quot;</span><span class="s2">level</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">local</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">select</span><span class="se">\&quot;</span><span class="s2">:&quot;</span>
  <span class="s2">&quot;   [ { </span><span class="se">\&quot;</span><span class="s2">expr</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">sum(sum#papi.PAPI_TOT_INS)</span><span class="se">\&quot;</span><span class="s2"> } ]&quot;</span>
  <span class="s2">&quot;  },&quot;</span>
  <span class="s2">&quot;  { </span><span class="se">\&quot;</span><span class="s2">level</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">cross</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">select</span><span class="se">\&quot;</span><span class="s2">:&quot;</span>
  <span class="s2">&quot;   [ { </span><span class="se">\&quot;</span><span class="s2">expr</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">avg(sum#sum#papi.PAPI_TOT_INS)</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">as</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">Avg instr./rank</span><span class="se">\&quot;</span><span class="s2"> },&quot;</span>
  <span class="s2">&quot;     { </span><span class="se">\&quot;</span><span class="s2">expr</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">max(sum#sum#papi.PAPI_TOT_INS)</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">as</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">Max instr./rank</span><span class="se">\&quot;</span><span class="s2"> }&quot;</span>
  <span class="s2">&quot;   ]&quot;</span>
  <span class="s2">&quot;  }&quot;</span>
  <span class="s2">&quot; ]&quot;</span>
  <span class="s2">&quot;}&quot;</span><span class="p">;</span>

<span class="n">ConfigManager</span> <span class="n">mgr</span><span class="p">;</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">add_option_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">);</span>

<span class="o">//</span>   <span class="n">Create</span> <span class="n">a</span> <span class="n">runtime</span><span class="o">-</span><span class="n">report</span> <span class="n">channel</span> <span class="n">using</span> <span class="n">the</span> <span class="n">count</span><span class="o">.</span><span class="n">instructions</span> <span class="n">option</span>
<span class="o">//</span> <span class="ow">and</span> <span class="n">start</span> <span class="n">recording</span><span class="o">.</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;runtime-report(count.instructions)&quot;</span><span class="p">);</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>
</pre></div>
</div>
</p>
<p><dl class="simple">
<dt><strong>Option specification syntax</strong></dt><dd><p>The option spec is a JSON dictionary with the following elements: <ul class="simple">
<li><p><em>name:</em> Name of the option. </p></li>
<li><p><em>category:</em> The option’s category. The category defines which configs can use this option: An option is only available to configs which list this category in their “categories” setting. </p></li>
<li><p><em>description:</em> A short one-line description. Included in the documentation string generated by <a class="reference internal" href="#classcali_1_1ConfigManager_1ac927cd656e656197b5b98bc58f9bbba5"><span class="std std-ref">get_documentation_for_spec()</span></a>. </p></li>
<li><p><em>services:</em> List of Caliper services this option requires. Note that the option will only be available if all required services are present in Caliper. </p></li>
<li><p><em>config:</em> A dictionary with Caliper configuration variables required for this option. Note that services will be added automatically based on the <em>services</em> entry. </p></li>
<li><p><em>query_args:</em> Defines aggregation operations to compute performance metrics. Specific to “metric” options. There are two aggregation levels: <em>local</em> computes process-local metrics, and <em>cross</em> computes cross-process metrics in MPI programs. For each level, specify metrics using a list of “select” definitions, where <em>expr</em> defines an aggregation using a CalQL expression, and <em>as</em> provides a human-readable name for the metric. Metrics on the <em>serial</em> and <em>local</em> levels use runtime aggregation results from the “aggregate” service as input, metrics on the <em>cross</em> level use “local” metrics as input. </p></li>
</ul>
</p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager3addEPKc">
<span id="_CPPv3N4cali13ConfigManager3addEPKc"></span><span id="_CPPv2N4cali13ConfigManager3addEPKc"></span><span id="cali::ConfigManager::add__cCP"></span><span class="target" id="classcali_1_1ConfigManager_1a423a71595e1d2e320a8cb74a00957154"></span>bool <code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>config_string</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager3addEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Parse the <em>config_string</em> configuration string and create the specified configuration channels. </p>
<p>Parses configuration strings of the following form:</p>
<p>&lt;config&gt; ( &lt;option&gt; = value, … ), …</p>
<p>e.g., “runtime-report,event-trace(output=trace.cali)”</p>
<p>If there was an error parsing the configuration string, the <a class="reference internal" href="#classcali_1_1ConfigManager_1a97c868ccc56aa73d73492c84c56201c5"><span class="std std-ref">error()</span></a> method will return <em>true</em> and an error message can be retrieved with <a class="reference internal" href="#classcali_1_1ConfigManager_1aab4f5155356431d29dc03b66bad58e0c"><span class="std std-ref">error_msg()</span></a>.</p>
<p>If the configuration string was parsed successfully, <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> instances for the requested configurations will be created and can be accessed through <a class="reference internal" href="#classcali_1_1ConfigManager_1a2566f82b602432ba31c5972da19794b8"><span class="std std-ref">get_all_channels()</span></a> or <a class="reference internal" href="#classcali_1_1ConfigManager_1a7beefeb80c11584b8072e97b3a59dea7"><span class="std std-ref">get_channel()</span></a>. The channels are initially inactive and must be activated explicitly with <a class="reference internal" href="#classcali_1_1ConfigManager_1add75b51b0da6140e2ff5b3a8c8a62d20"><span class="std std-ref">ConfigManager::start()</span></a>.</p>
<p><a class="reference internal" href="#classcali_1_1ConfigManager_1a423a71595e1d2e320a8cb74a00957154"><span class="std std-ref">add()</span></a> can be invoked multiple times.</p>
<p>In this <a class="reference internal" href="#classcali_1_1ConfigManager_1a423a71595e1d2e320a8cb74a00957154"><span class="std std-ref">add()</span></a> version, key-value pairs in the config string that neither represent a valid configuration or configuration option will be marked as a parse error.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>false if there was a parse error, true otherwise </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager3addEPKcR8argmap_t">
<span id="_CPPv3N4cali13ConfigManager3addEPKcR8argmap_t"></span><span id="_CPPv2N4cali13ConfigManager3addEPKcR8argmap_t"></span><span id="cali::ConfigManager::add__cCP.argmap_tR"></span><span class="target" id="classcali_1_1ConfigManager_1a9334311712cf1f967d59e90e197d461d"></span>bool <code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>config_string</em>, argmap_t &amp;<em>extra_kv_pairs</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager3addEPKcR8argmap_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Parse the <em>config_string</em> configuration string and create the specified configuration channels. </p>
<p>Works similar to <a class="reference internal" href="#classcali_1_1ConfigManager_1a423a71595e1d2e320a8cb74a00957154"><span class="std std-ref">ConfigManager::add(const char*)</span></a>, but does not mark extra key-value pairs in the config string that do not represent a configuration name or option as errors, and instead returns them in <em>extra_kv_pairs</em>. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager21set_default_parameterEPKcPKc">
<span id="_CPPv3N4cali13ConfigManager21set_default_parameterEPKcPKc"></span><span id="_CPPv2N4cali13ConfigManager21set_default_parameterEPKcPKc"></span><span id="cali::ConfigManager::set_default_parameter__cCP.cCP"></span><span class="target" id="classcali_1_1ConfigManager_1a461b5dd5352bec609465710200ef78f8"></span>void <code class="sig-name descname">set_default_parameter</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>key</em>, <em class="property">const</em> char *<em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager21set_default_parameterEPKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Pre-set parameter <em>key</em> to <em>value</em> for all configurations. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager5errorEv">
<span id="_CPPv3NK4cali13ConfigManager5errorEv"></span><span id="_CPPv2NK4cali13ConfigManager5errorEv"></span><span id="cali::ConfigManager::errorC"></span><span class="target" id="classcali_1_1ConfigManager_1a97c868ccc56aa73d73492c84c56201c5"></span>bool <code class="sig-name descname">error</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager5errorEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns <em>true</em> if there was an error parsing configuration strings. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager9error_msgEv">
<span id="_CPPv3NK4cali13ConfigManager9error_msgEv"></span><span id="_CPPv2NK4cali13ConfigManager9error_msgEv"></span><span id="cali::ConfigManager::error_msgC"></span><span class="target" id="classcali_1_1ConfigManager_1aab4f5155356431d29dc03b66bad58e0c"></span>std::string <code class="sig-name descname">error_msg</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager9error_msgEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns an error message if there was an error parsing configuration strings. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager16get_all_channelsEv">
<span id="_CPPv3N4cali13ConfigManager16get_all_channelsEv"></span><span id="_CPPv2N4cali13ConfigManager16get_all_channelsEv"></span><span id="cali::ConfigManager::get_all_channels"></span><span class="target" id="classcali_1_1ConfigManager_1a2566f82b602432ba31c5972da19794b8"></span>ChannelList <code class="sig-name descname">get_all_channels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager16get_all_channelsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a list of channel controller instances for the requested configurations. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>An STL container with C++ shared_ptr objects to the <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> instances created from the configuration strings. </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager11get_channelEPKc">
<span id="_CPPv3N4cali13ConfigManager11get_channelEPKc"></span><span id="_CPPv2N4cali13ConfigManager11get_channelEPKc"></span><span id="cali::ConfigManager::get_channel__cCP"></span><span class="target" id="classcali_1_1ConfigManager_1a7beefeb80c11584b8072e97b3a59dea7"></span>ChannelPtr <code class="sig-name descname">get_channel</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager11get_channelEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a channel controller instance for configuration <em>name</em>. </p>
<p>Returns a C++ shared pointer containing the channel controller instance with the given <em>name</em>, or an empty shared_ptr object when no such channel exists. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager5startEv">
<span id="_CPPv3N4cali13ConfigManager5startEv"></span><span id="_CPPv2N4cali13ConfigManager5startEv"></span><span id="cali::ConfigManager::start"></span><span class="target" id="classcali_1_1ConfigManager_1add75b51b0da6140e2ff5b3a8c8a62d20"></span>void <code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager5startEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Start all configured measurement channels, or re-start paused ones. </p>
<p>Invokes the <a class="reference internal" href="#classcali_1_1ChannelController_1a18974f665205d0c92a0d44bb65e4f416"><span class="std std-ref">ChannelController::start()</span></a> method on all configuration channel controllers created by the <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a>. Equivalent to <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ConfigManager</span> <span class="n">mgr</span><span class="p">;</span>
<span class="o">//</span> <span class="o">...</span>
<span class="n">auto</span> <span class="n">channels</span> <span class="o">=</span> <span class="n">mgr</span><span class="o">.</span><span class="n">get_all_channels</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="n">auto</span><span class="o">&amp;</span> <span class="n">channel</span> <span class="p">:</span> <span class="n">channels</span><span class="p">)</span>
    <span class="n">channel</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">();</span>
</pre></div>
</div>
 </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager4stopEv">
<span id="_CPPv3N4cali13ConfigManager4stopEv"></span><span id="_CPPv2N4cali13ConfigManager4stopEv"></span><span id="cali::ConfigManager::stop"></span><span class="target" id="classcali_1_1ConfigManager_1abba3805c050fdeec7312e5738630ad2d"></span>void <code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager4stopEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Pause all configured measurement channels. </p>
<p>Invokes the <a class="reference internal" href="#classcali_1_1ChannelController_1ad9a092004fb9e6dbca740c9b966bef37"><span class="std std-ref">ChannelController::stop()</span></a> method on all configuration channel controllers created by the <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a>. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager5flushEv">
<span id="_CPPv3N4cali13ConfigManager5flushEv"></span><span id="_CPPv2N4cali13ConfigManager5flushEv"></span><span id="cali::ConfigManager::flush"></span><span class="target" id="classcali_1_1ConfigManager_1a6e38a1f9fd52f402313c09aa5d7727da"></span>void <code class="sig-name descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager5flushEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flush all configured measurement channels. </p>
<p>Invokes the <a class="reference internal" href="#classcali_1_1ChannelController_1a2351b863e1caf4f7d8a2ff1bca1310cb"><span class="std std-ref">ChannelController::flush()</span></a> method on all configuration channel controllers created by the <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a>. Equivalent to <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">channels</span> <span class="o">=</span> <span class="n">mgr</span><span class="o">.</span><span class="n">get_all_channels</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="n">auto</span><span class="o">&amp;</span> <span class="n">channel</span> <span class="p">:</span> <span class="n">channels</span><span class="p">)</span>
    <span class="n">channel</span><span class="o">-&gt;</span><span class="n">flush</span><span class="p">();</span>
</pre></div>
</div>
 </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager5checkEPKcb">
<span id="_CPPv3NK4cali13ConfigManager5checkEPKcb"></span><span id="_CPPv2NK4cali13ConfigManager5checkEPKcb"></span><span id="cali::ConfigManager::check__cCP.bC"></span><span class="target" id="classcali_1_1ConfigManager_1a7943761a7fdb4e649d7ccece318a8443"></span>std::string <code class="sig-name descname">check</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>config_string</em>, bool <em>allow_extra_kv_pairs</em> = false<span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager5checkEPKcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if the given config string is valid. </p>
<p>If <em>allow_extra_kv_pairs</em> is set to  false, extra key-value pairs in the config string that do not represent configurations or parameters will be marked as errors.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Error message, or empty string if input is valid. </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager22available_config_specsEv">
<span id="_CPPv3NK4cali13ConfigManager22available_config_specsEv"></span><span id="_CPPv2NK4cali13ConfigManager22available_config_specsEv"></span><span id="cali::ConfigManager::available_config_specsC"></span><span class="target" id="classcali_1_1ConfigManager_1a6b50140f7da24d09fac866f7269d7163"></span>std::vector&lt;std::string&gt; <code class="sig-name descname">available_config_specs</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager22available_config_specsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return names of available config specs. </p>
<p>Returns only the specifications whose requirements (e.g., available services) are met in this Caliper instance.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Names of all available config specs for this <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a>. </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager26get_documentation_for_specEPKc">
<span id="_CPPv3NK4cali13ConfigManager26get_documentation_for_specEPKc"></span><span id="_CPPv2NK4cali13ConfigManager26get_documentation_for_specEPKc"></span><span id="cali::ConfigManager::get_documentation_for_spec__cCPC"></span><span class="target" id="classcali_1_1ConfigManager_1ac927cd656e656197b5b98bc58f9bbba5"></span>std::string <code class="sig-name descname">get_documentation_for_spec</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager26get_documentation_for_specEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return description and options for the given config spec. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Static Functions</p>
<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager17available_configsEv">
<span id="_CPPv3N4cali13ConfigManager17available_configsEv"></span><span id="_CPPv2N4cali13ConfigManager17available_configsEv"></span><span id="cali::ConfigManager::available_configs"></span><span class="target" id="classcali_1_1ConfigManager_1add25d7cd1b5e473e37a2c639be1b53d5"></span><em class="property">static</em> std::vector&lt;std::string&gt; <code class="sig-name descname">available_configs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager17available_configsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return names of global config specs. </p>
<p></p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager21get_config_docstringsEv">
<span id="_CPPv3N4cali13ConfigManager21get_config_docstringsEv"></span><span id="_CPPv2N4cali13ConfigManager21get_config_docstringsEv"></span><span id="cali::ConfigManager::get_config_docstrings"></span><span class="target" id="classcali_1_1ConfigManager_1a3113e75e529ebf89e94a70d7835defa5"></span><em class="property">static</em> std::vector&lt;std::string&gt; <code class="sig-name descname">get_config_docstrings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager21get_config_docstringsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return descriptions for available global configs. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13ConfigManager19check_config_stringEPKcb">
<span id="_CPPv3N4cali13ConfigManager19check_config_stringEPKcb"></span><span id="_CPPv2N4cali13ConfigManager19check_config_stringEPKcb"></span><span id="cali::ConfigManager::check_config_string__cCP.b"></span><span class="target" id="classcali_1_1ConfigManager_1a458cd01e9ecc819652216b8fa6e374fd"></span><em class="property">static</em> std::string <code class="sig-name descname">check_config_string</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>config_string</em>, bool <em>allow_extra_kv_pairs</em> = false<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13ConfigManager19check_config_stringEPKcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if given config string is valid for global config specs. Deprecated. </p>
<p>If <em>allow_extra_kv_pairs</em> is set to  false, extra key-value pairs in the config string that do not represent configurations or parameters will be marked as errors.</p>
<p></p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Error message, or empty string if input is valid. </p>
</dd>
</dl>
</p>
</dd></dl>

</div>
<dl class="class">
<dt id="_CPPv4N4cali13ConfigManager10ConfigInfoE">
<span id="_CPPv3N4cali13ConfigManager10ConfigInfoE"></span><span id="_CPPv2N4cali13ConfigManager10ConfigInfoE"></span><span id="cali::ConfigManager::ConfigInfo"></span><span class="target" id="structcali_1_1ConfigManager_1_1ConfigInfo"></span><em class="property">struct </em><code class="sig-name descname">ConfigInfo</code><a class="headerlink" href="#_CPPv4N4cali13ConfigManager10ConfigInfoE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;ConfigManager.h&gt;</em><p>Define a config spec with custom <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> creation and option checking functions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N4cali13ConfigManager10ConfigInfo4specE">
<span id="_CPPv3N4cali13ConfigManager10ConfigInfo4specE"></span><span id="_CPPv2N4cali13ConfigManager10ConfigInfo4specE"></span><span id="cali::ConfigManager::ConfigInfo::spec__cCP"></span><span class="target" id="structcali_1_1ConfigManager_1_1ConfigInfo_1ada11142e8a2d3e9ab01a8cfa036be00a"></span><em class="property">const</em> char *<code class="sig-name descname">spec</code><a class="headerlink" href="#_CPPv4N4cali13ConfigManager10ConfigInfo4specE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>JSON config spec. </p>
<p><dl class="simple">
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classcali_1_1ConfigManager_1aae411b5e08277f0f8d56a3acf5f1fad6"><span class="std std-ref">ConfigManager::add_config_spec(const char*)</span></a> </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N4cali13ConfigManager10ConfigInfo6createE">
<span id="_CPPv3N4cali13ConfigManager10ConfigInfo6createE"></span><span id="_CPPv2N4cali13ConfigManager10ConfigInfo6createE"></span><span id="cali::ConfigManager::ConfigInfo::create__CreateConfigFn"></span><span class="target" id="structcali_1_1ConfigManager_1_1ConfigInfo_1ac22eb4eb121bca5bbf751aa23420b98f"></span><a class="reference internal" href="#_CPPv4N4cali13ConfigManager14CreateConfigFnE" title="cali::ConfigManager::CreateConfigFn">CreateConfigFn</a> <code class="sig-name descname">create</code><a class="headerlink" href="#_CPPv4N4cali13ConfigManager10ConfigInfo6createE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Optional custom <a class="reference internal" href="#classcali_1_1ChannelController"><span class="std std-ref">ChannelController</span></a> creation function, or <em>nullptr</em> to use the default. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N4cali13ConfigManager10ConfigInfo10check_argsE">
<span id="_CPPv3N4cali13ConfigManager10ConfigInfo10check_argsE"></span><span id="_CPPv2N4cali13ConfigManager10ConfigInfo10check_argsE"></span><span id="cali::ConfigManager::ConfigInfo::check_args__CheckArgsFn"></span><span class="target" id="structcali_1_1ConfigManager_1_1ConfigInfo_1a7ec5f88fd778e529ae2b459084fee0dc"></span><a class="reference internal" href="#_CPPv4N4cali13ConfigManager11CheckArgsFnE" title="cali::ConfigManager::CheckArgsFn">CheckArgsFn</a> <code class="sig-name descname">check_args</code><a class="headerlink" href="#_CPPv4N4cali13ConfigManager10ConfigInfo10check_argsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Optional argument checking function, or <em>nullptr</em> to use the default. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv4N4cali13ConfigManager7OptionsE">
<span id="_CPPv3N4cali13ConfigManager7OptionsE"></span><span id="_CPPv2N4cali13ConfigManager7OptionsE"></span><span id="cali::ConfigManager::Options"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options"></span><em class="property">class </em><code class="sig-name descname">Options</code><a class="headerlink" href="#_CPPv4N4cali13ConfigManager7OptionsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;ConfigManager.h&gt;</em><p>Manages the list of options given to a <a class="reference internal" href="#classcali_1_1ConfigManager"><span class="std std-ref">ConfigManager</span></a> config controller. Internal use. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options6is_setEPKc">
<span id="_CPPv3NK4cali13ConfigManager7Options6is_setEPKc"></span><span id="_CPPv2NK4cali13ConfigManager7Options6is_setEPKc"></span><span id="cali::ConfigManager::Options::is_set__cCPC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1ab3b27e853212270bbc7a214b9b89a6c6"></span>bool <code class="sig-name descname">is_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>option</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options6is_setEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicates if <em>option</em> is in the options list. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options10is_enabledEPKc">
<span id="_CPPv3NK4cali13ConfigManager7Options10is_enabledEPKc"></span><span id="_CPPv2NK4cali13ConfigManager7Options10is_enabledEPKc"></span><span id="cali::ConfigManager::Options::is_enabled__cCPC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a1f7de328a003691f1ff3dc78d10bc085"></span>bool <code class="sig-name descname">is_enabled</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>option</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options10is_enabledEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicates if <em>option</em> is enabled. </p>
<p>An option is enabled if it is present in the options list, and, for boolean options, set to <em>true</em>. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options3getEPKcPKc">
<span id="_CPPv3NK4cali13ConfigManager7Options3getEPKcPKc"></span><span id="_CPPv2NK4cali13ConfigManager7Options3getEPKcPKc"></span><span id="cali::ConfigManager::Options::get__cCP.cCPC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1ae0d12c8c62fc4e6b9a9c6e7c7bfbb47e"></span>StringConverter <code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>option</em>, <em class="property">const</em> char *<em>default_value</em> = &quot;&quot;<span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options3getEPKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the value for <em>option</em>, or <em>default_value</em> if it is not set in the options list. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options5checkEv">
<span id="_CPPv3NK4cali13ConfigManager7Options5checkEv"></span><span id="_CPPv2NK4cali13ConfigManager7Options5checkEv"></span><span id="cali::ConfigManager::Options::checkC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a708540262cb932179e06d266ecc7e54f"></span>std::string <code class="sig-name descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options5checkEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Perform a validity check. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options15enabled_optionsEv">
<span id="_CPPv3NK4cali13ConfigManager7Options15enabled_optionsEv"></span><span id="_CPPv2NK4cali13ConfigManager7Options15enabled_optionsEv"></span><span id="cali::ConfigManager::Options::enabled_optionsC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a27710c90849d83f05ad44ff1bd035f07"></span>std::vector&lt;std::string&gt; <code class="sig-name descname">enabled_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options15enabled_optionsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a list of all enabled boolean options. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options21update_channel_configER12config_map_t">
<span id="_CPPv3NK4cali13ConfigManager7Options21update_channel_configER12config_map_t"></span><span id="_CPPv2NK4cali13ConfigManager7Options21update_channel_configER12config_map_t"></span><span id="cali::ConfigManager::Options::update_channel_config__config_map_tRC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a30f2b804a3567e85083be4e4675d3f04"></span>void <code class="sig-name descname">update_channel_config</code><span class="sig-paren">(</span>config_map_t &amp;<em>config</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options21update_channel_configER12config_map_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Update the config controller’s Caliper configuration according to the requirements of the selected options. </p>
<p>Updates CALI_SERVICES_ENABLE and adds any additional configuration flags that may be required. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options12query_selectEPKcRKNSt6stringEb">
<span id="_CPPv3NK4cali13ConfigManager7Options12query_selectEPKcRKNSt6stringEb"></span><span id="_CPPv2NK4cali13ConfigManager7Options12query_selectEPKcRKNSt6stringEb"></span><span id="cali::ConfigManager::Options::query_select__cCP.ssCR.bC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a3da4af17d7555bf0e9a5d335b5e7ca7a"></span>std::string <code class="sig-name descname">query_select</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>level</em>, <em class="property">const</em> std::string &amp;<em>in</em>, bool <em>use_alias</em> = true<span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options12query_selectEPKcRKNSt6stringEb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a CalQL SELECT expression to compute metrics in the option list. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>The SELECT list (comma-separated string), but without the ‘SELECT’ keyword </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code>: The aggregation level (‘local’ or ‘cross’) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in</span></code>: Base SELECT expression as required by the controller </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_alias</span></code>: Wether to add aliases to the expression (as in SELECT x AS y) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options13query_groupbyEPKcRKNSt6stringE">
<span id="_CPPv3NK4cali13ConfigManager7Options13query_groupbyEPKcRKNSt6stringE"></span><span id="_CPPv2NK4cali13ConfigManager7Options13query_groupbyEPKcRKNSt6stringE"></span><span id="cali::ConfigManager::Options::query_groupby__cCP.ssCRC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a0634863a04350b7f724414c51cb3340e"></span>std::string <code class="sig-name descname">query_groupby</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>level</em>, <em class="property">const</em> std::string &amp;<em>in</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options13query_groupbyEPKcRKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a CalQL GROUP BY list for metrics in the option list. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>The GROUP BY list (comma-separated string), but without the ‘GROUP BY’ keyword </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code>: The aggregation level (‘local’ or ‘cross’) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in</span></code>: Base GROUP BY list as required by the controller </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK4cali13ConfigManager7Options9query_letEPKcRKNSt6stringE">
<span id="_CPPv3NK4cali13ConfigManager7Options9query_letEPKcRKNSt6stringE"></span><span id="_CPPv2NK4cali13ConfigManager7Options9query_letEPKcRKNSt6stringE"></span><span id="cali::ConfigManager::Options::query_let__cCP.ssCRC"></span><span class="target" id="classcali_1_1ConfigManager_1_1Options_1a953fce70efa78a69d80b671c1eca4c3a"></span>std::string <code class="sig-name descname">query_let</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>level</em>, <em class="property">const</em> std::string &amp;<em>in</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK4cali13ConfigManager7Options9query_letEPKcRKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a CalQL LET list for metrics in the option list. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>The LET clause (‘LET’ + comma-separated list of definitions), or an empty string if there is no LET input </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code>: The aggregation level (‘local’ or ‘cross’) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in</span></code>: Base LET list as required by the controller </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv4N4cali13RegionProfileE">
<span id="_CPPv3N4cali13RegionProfileE"></span><span id="_CPPv2N4cali13RegionProfileE"></span><span id="cali::RegionProfile"></span><span class="target" id="classcali_1_1RegionProfile"></span><em class="property">class </em><code class="sig-name descname">RegionProfile</code> : <em class="property">public</em> cali::<a class="reference internal" href="#_CPPv4N4cali17ChannelControllerE" title="cali::ChannelController">ChannelController</a><a class="headerlink" href="#_CPPv4N4cali13RegionProfileE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;RegionProfile.h&gt;</em><p>Collect and return time profiles for annotated Caliper regions in a C++ map. </p>
<p>The <a class="reference internal" href="#classcali_1_1RegionProfile"><span class="std std-ref">RegionProfile</span></a> class is a Caliper controller that allows one to collect and examine time spent in Caliper-annotated code regions within an instrumented program. It can compute inclusive or exclusive profiles. Start/stop profiling with the <a class="reference internal" href="#classcali_1_1ChannelController_1a18974f665205d0c92a0d44bb65e4f416"><span class="std std-ref">start()</span></a> and <a class="reference internal" href="#classcali_1_1ChannelController_1ad9a092004fb9e6dbca740c9b966bef37"><span class="std std-ref">stop()</span></a> methods. Once started, time profiles can be retrieved at any time with <a class="reference internal" href="#classcali_1_1RegionProfile_1a30edfa55837be6ae52bffe33f56bde9f"><span class="std std-ref">exclusive_region_times()</span></a> or <a class="reference internal" href="#classcali_1_1RegionProfile_1ac05c396fcfdffd2c7a86127707310dee"><span class="std std-ref">inclusive_region_times()</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Types</p>
<dl class="type">
<dt id="_CPPv4N4cali13RegionProfile16region_profile_tE">
<span id="_CPPv3N4cali13RegionProfile16region_profile_tE"></span><span id="_CPPv2N4cali13RegionProfile16region_profile_tE"></span><span id="cali::RegionProfile::region_profile_t"></span><span class="target" id="classcali_1_1RegionProfile_1a55940af64de4013dc73acf1a8f0cfc88"></span><em class="property">typedef </em>std::tuple&lt;std::map&lt;std::string, double&gt;, double, double&gt; <code class="sig-name descname">region_profile_t</code><a class="headerlink" href="#_CPPv4N4cali13RegionProfile16region_profile_tE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A tuple containing the computed time profiles. </p>
<p>The first member is a string -&gt; double STL map that stores the times per region. The map keys are the region names used in the annotations, e.g., “work” for <code class="docutils literal notranslate"><span class="pre">CALI_MARK_BEGIN</span></code>(“work”). Note that nested regions with the same name can’t be distinguished.</p>
<p>The second member stores the total time spent in the <em>selected</em> region type, and the third member stores the total time spent profiling. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N4cali13RegionProfile13RegionProfileEv">
<span id="_CPPv3N4cali13RegionProfile13RegionProfileEv"></span><span id="_CPPv2N4cali13RegionProfile13RegionProfileEv"></span><span id="cali::RegionProfile::RegionProfile"></span><span class="target" id="classcali_1_1RegionProfile_1a4a8917984996a044d825da322f45e452"></span><code class="sig-name descname">RegionProfile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13RegionProfile13RegionProfileEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a <a class="reference internal" href="#classcali_1_1RegionProfile"><span class="std std-ref">RegionProfile</span></a> controller object. </p>
<p>Note that profiling must be started explicitly with the <a class="reference internal" href="#classcali_1_1ChannelController_1a18974f665205d0c92a0d44bb65e4f416"><span class="std std-ref">start()</span></a> method. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13RegionProfile22exclusive_region_timesERKNSt6stringE">
<span id="_CPPv3N4cali13RegionProfile22exclusive_region_timesERKNSt6stringE"></span><span id="_CPPv2N4cali13RegionProfile22exclusive_region_timesERKNSt6stringE"></span><span id="cali::RegionProfile::exclusive_region_times__ssCR"></span><span class="target" id="classcali_1_1RegionProfile_1a30edfa55837be6ae52bffe33f56bde9f"></span><a class="reference internal" href="#_CPPv4N4cali13RegionProfile16region_profile_tE" title="cali::RegionProfile::region_profile_t">region_profile_t</a> <code class="sig-name descname">exclusive_region_times</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>region_type</em> = &quot;&quot;<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13RegionProfile22exclusive_region_timesERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return an exclusive time profile for annotated regions. </p>
<p>Exclusive time is the time spent in within a begin/end region itself, excluding time spent in sub-regions that are nested within.</p>
<p>Profiling must have been started with <a class="reference internal" href="#classcali_1_1ChannelController_1a18974f665205d0c92a0d44bb65e4f416"><span class="std std-ref">start()</span></a>.</p>
<p>By default, the result contains times for all region types with the <code class="docutils literal notranslate"><span class="pre">CALI_ATTR_NESTED</span></code> flag. Specifically, this includes regions marked with the Caliper annotations macros such as <code class="docutils literal notranslate"><span class="pre">CALI_MARK_BEGIN</span></code>. With the optional <em>region_type</em> argument, profiles can be calculated for a specific region type (Caliper attribute) only. In this case, the second value in the result tuple contains the total time spent in regions with the selected type.</p>
<p>As an example, the following code returns a profile for “function” regions:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RegionProfile</span> <span class="n">rp</span><span class="p">;</span>
<span class="n">rp</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>

<span class="o">//</span> <span class="o">...</span>

<span class="n">std</span><span class="p">::</span><span class="nb">map</span><span class="o">&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="p">,</span> <span class="n">double</span><span class="o">&gt;</span> <span class="n">function_times</span><span class="p">;</span>
<span class="n">double</span> <span class="n">total_function_time</span><span class="p">;</span>
<span class="n">double</span> <span class="n">total_profiling_time</span><span class="p">;</span>

<span class="n">std</span><span class="p">::</span><span class="n">tie</span><span class="p">(</span><span class="n">function_times</span><span class="p">,</span> <span class="n">total_function_time</span><span class="p">,</span> <span class="n">total_profiling_time</span><span class="p">)</span> <span class="o">=</span> 
    <span class="n">rp</span><span class="o">.</span><span class="n">exclusive_region_times</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">);</span>
</pre></div>
</div>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>A region_profile_t tuple with exclusive time per region in a region name -&gt; time STL map, the total time for the selected region time, and the total time spent profiling. All time values are in seconds.</p>
</dd>
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classcali_1_1RegionProfile_1a55940af64de4013dc73acf1a8f0cfc88"><span class="std std-ref">region_profile_t</span></a> </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13RegionProfile22inclusive_region_timesERKNSt6stringE">
<span id="_CPPv3N4cali13RegionProfile22inclusive_region_timesERKNSt6stringE"></span><span id="_CPPv2N4cali13RegionProfile22inclusive_region_timesERKNSt6stringE"></span><span id="cali::RegionProfile::inclusive_region_times__ssCR"></span><span class="target" id="classcali_1_1RegionProfile_1ac05c396fcfdffd2c7a86127707310dee"></span><a class="reference internal" href="#_CPPv4N4cali13RegionProfile16region_profile_tE" title="cali::RegionProfile::region_profile_t">region_profile_t</a> <code class="sig-name descname">inclusive_region_times</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>region_type</em> = &quot;&quot;<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13RegionProfile22inclusive_region_timesERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return an inclusive time profile for annotated regions. </p>
<p>Inclusive time is time spent within a begin/end region, including time spent in sub-regions that are nested within.</p>
<p>Other than returning inclusive rather than exclusive times, this method works the same as <a class="reference internal" href="#classcali_1_1RegionProfile_1a30edfa55837be6ae52bffe33f56bde9f"><span class="std std-ref">exclusive_region_times()</span></a>.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>A region_profile_t tuple with inclusive time per region in a region name -&gt; time STL map, the total time for the selected region time, and the total time spent profiling. All time values are in seconds.</p>
</dd>
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classcali_1_1RegionProfile_1a55940af64de4013dc73acf1a8f0cfc88"><span class="std std-ref">region_profile_t</span></a>, <a class="reference internal" href="#classcali_1_1RegionProfile_1a30edfa55837be6ae52bffe33f56bde9f"><span class="std std-ref">exclusive_region_times()</span></a> </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N4cali13RegionProfile5clearEv">
<span id="_CPPv3N4cali13RegionProfile5clearEv"></span><span id="_CPPv2N4cali13RegionProfile5clearEv"></span><span id="cali::RegionProfile::clear"></span><span class="target" id="classcali_1_1RegionProfile_1a7baacc3292675b7d900d68cdd8c43e76"></span>void <code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4cali13RegionProfile5clearEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Reset the profiling database. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/caliper-logo-small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ConfigManager API reference</a><ul>
<li><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="AnnotationAPI.html"
                        title="previous chapter">Annotation API reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="FortranSupport.html"
                        title="next chapter">Fortran support</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ConfigManagerAPI.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="FortranSupport.html" title="Fortran support"
             >next</a> |</li>
        <li class="right" >
          <a href="AnnotationAPI.html" title="Annotation API reference"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.5.0-dev documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2016, Lawrence Livermore National Laboratory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.1.
    </div>
  </body>
</html>